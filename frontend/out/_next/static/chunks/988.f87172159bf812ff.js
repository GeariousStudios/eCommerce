"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[988],{2237:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(2115);let n=l.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?l.createElement("title",{id:n},a):null,l.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))})},3107:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(5155),n=a(2115);let r=e=>{let t=(0,n.useRef)(null),[a,r]=(0,n.useState)("16rem"),s=()=>{let e=t.current;if(!e)return;let a=e.getBoundingClientRect(),l=Math.min(window.innerWidth-a.left,a.right-80,256);r("".concat(l,"px"))};return(0,n.useEffect)(()=>{if(!e.isOpen||!t.current)return;let a=requestAnimationFrame(s);return()=>cancelAnimationFrame(a)},[e.isOpen]),(0,n.useEffect)(()=>{let e=new ResizeObserver(s);return t.current&&e.observe(t.current),window.addEventListener("resize",s),()=>{e.disconnect(),window.removeEventListener("resize",s)}},[]),(0,n.useEffect)(()=>{if(!e.isOpen)return;s();let a=a=>{let l=t.current,n=e.triggerRef&&e.triggerRef.current,r=a.target;l&&!l.contains(r)&&n&&!n.contains(r)&&e.onClose()};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[e.isOpen,e.onClose]),(0,l.jsx)("div",{ref:t,role:"dialog","aria-hidden":!e.isOpen,className:"".concat(e.isOpen?"visible opacity-100":"invisible opacity-0"," absolute top-full right-0 z-[calc(var(--z-tooltip)+1)] mt-1 flex flex-col gap-8 overflow-x-hidden overflow-y-auto rounded-2xl bg-[var(--bg-topbar)] p-4 break-words shadow-[0_0_16px_0_rgba(0,0,0,0.125)] transition-[opacity,visibility] duration-[var(--fast)]"),style:{width:a},children:e.children})}},4988:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var l=a(5155),n=a(2115),r=a(1701),s=a(3555),i=a(8500),o=a(4541),c=a(815);let d=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))}),u=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}),m=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}),x=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}),h=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{d:"M10 3.75a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM17.25 4.5a.75.75 0 0 0 0-1.5h-5.5a.75.75 0 0 0 0 1.5h5.5ZM5 3.75a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 .75.75ZM4.25 17a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5ZM17.25 17a.75.75 0 0 0 0-1.5h-5.5a.75.75 0 0 0 0 1.5h5.5ZM9 10a.75.75 0 0 1-.75.75h-5.5a.75.75 0 0 1 0-1.5h5.5A.75.75 0 0 1 9 10ZM17.25 10.75a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5ZM14 10a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM10 16.25a2 2 0 1 0-4 0 2 2 0 0 0 4 0Z"}))}),f=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))});var v=a(2237),p=a(7765),g=a(2175),b=a(1151),j=a(1972),w=a(7877),N=a(4402),y=a(1133),k=a(9037);let A=e=>{let{id:t,label:a,options:r,value:s,onChange:i,required:o,onModal:d=!1}=e,u=(0,n.useRef)(null),m=(0,n.useRef)([]),x=(0,n.useRef)(null),h=(0,n.useRef)(null),[f,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e;if(!f)return;let t=()=>{if(u.current&&x.current){let e=u.current.getBoundingClientRect();x.current.style.top="".concat(e.bottom,"px"),x.current.style.left="".concat(e.left,"px"),x.current.style.width="".concat(e.width-16,"px")}e=requestAnimationFrame(t)};return t(),()=>cancelAnimationFrame(e)},[f]),(0,n.useEffect)(()=>{let e=e=>{let t=e.target,a=u.current,l=h.current;a&&l&&!a.contains(t)&&!l.contains(t)&&v(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[]);let p=r.filter(e=>s.includes(e.value)).map(e=>e.label).join(", ");return(0,l.jsxs)("div",{className:"relative w-full",ref:u,children:[(0,l.jsxs)("div",{className:"".concat(f?"outline-2 outline-offset-2 outline-[var(--accent-color)]":""," z-1 flex h-[40px] w-full cursor-pointer items-center rounded border-1 border-[var(--border-main)] bg-transparent p-2 transition-[max-height] duration-[var(--medium)]"),onClick:()=>v(!f),onKeyDown:e=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),v(!f)):"Escape"===e.key&&v(!1)},tabIndex:0,role:"button","aria-haspopup":"listbox","aria-expanded":f,children:[(0,l.jsx)("span",{className:"grow truncate overflow-hidden text-ellipsis",children:p}),(0,l.jsx)("span",{className:"".concat(f?"text-[var(--accent-color)]":""," flex transition-colors duration-[var(--fast)]"),children:(0,l.jsx)(c.A,{className:"".concat(f?"rotate-180 text-[var(--accent-color)]":""," h-6 min-h-6 w-0 min-w-6 rotate-0 transition-[color,rotate] duration-[var(--slow)]")})})]}),(0,l.jsxs)("label",{htmlFor:t,className:"".concat(s.length>0||f?"-top-4 ".concat(d?"bg-[var(--bg-modal)]":"bg-[var(--bg-main)]"," font-semibold text-[var(--accent-color)]"):"top-[60%] -translate-y-[65%] bg-transparent"," pointer-events-none absolute left-2 z-2 px-1.5 transition-[translate,top] duration-[var(--slow)] select-none"),children:[a,o&&(0,l.jsx)("span",{className:"ml-1 text-red-700",children:"*"})]}),(0,l.jsx)(k.A,{children:(0,l.jsxs)("ul",{ref:e=>{x.current=e,h.current=e},className:"".concat(f?"pointer-events-auto max-h-48 opacity-100":"max-h-0"," ").concat(r.length>=4?"overflow-y-auto":"overflow-y-hidden"," fixed ml-2 z-[var(--z-tooltip)] list-none rounded-b border-1 border-t-0 border-[var(--border-main)] bg-[var(--bg-main)] opacity-0 transition-[opacity,max-height] duration-[var(--medium)]"),role:"listbox",inert:!f||void 0,children:[(0,l.jsx)("li",{role:"option","aria-hidden":"true",hidden:!0}),r.map((e,t)=>(0,l.jsx)("li",{ref:e=>{m.current[t]=e},tabIndex:0,className:"".concat(s.includes(e.value)?"font-bold":""," cursor-pointer p-2 transition-colors duration-[var(--slow)] select-none hover:bg-[var(--accent-color)]"),role:"option",onClick:t=>{let a;t.stopPropagation(),a=s.includes(e.value)?s.filter(t=>t!==e.value):[...s,e.value],i&&i(a)},onKeyDown:a=>{if("Escape"===a.key)v(!1);else if("Tab"===a.key){var l;a.preventDefault();let e=a.shiftKey?-1:1,n=r.length;null==(l=m.current[(t+e+n)%n])||l.focus()}else if("Enter"===a.key||" "===a.key){let t;a.preventDefault(),t=s.includes(e.value)?s.filter(t=>t!==e.value):[...s,e.value],i&&i(t),v(!1)}},children:e.label},e.value))]})}),(0,l.jsxs)("select",{id:t,value:s[0]||"",onChange:e=>i&&i([e.target.value]),required:o,tabIndex:-1,className:"pointer-events-none absolute top-1/2 w-full opacity-0",children:[(0,l.jsx)("option",{value:"",children:"V\xe4lj..."}),r.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})]})},S=e=>{let t=(0,n.useRef)(null),[a,s]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[h,f]=(0,n.useState)([]),[v,b]=(0,n.useState)(!1),w=localStorage.getItem("token"),{notify:N}=(0,i.d)(),k="https://ecommerce-9jo7.onrender.com";(0,n.useEffect)(()=>{e.isOpen&&(null!==e.userId&&void 0!==e.userId?C():(s(""),c(""),u(""),x(""),f([]),b(!1)))},[e.isOpen,e.userId]);let S=async t=>{t.preventDefault();try{let t=await fetch("".concat(k,"/user-management/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)},body:JSON.stringify({username:a,name:o,password:d,email:""===m.trim()?null:m,roles:h,isLocked:v})});if(401===t.status)return void localStorage.removeItem("token");let l=await t.json();if(!t.ok&&l.errors){let e=null,t=Number.MAX_SAFE_INTEGER;for(let a in l.errors)for(let n of l.errors[a]){let a=n.match(/\[(\d+)\]/),l=a?parseInt(a[1],10):99;l<t&&(t=l,e=n.replace(/\[\d+\]\s*/,""))}e&&N("error",e);return}e.onClose(),e.onUserUpdated(),N("success","Anv\xe4ndare skapad!",4e3)}catch(e){N("error",String(e))}},C=async()=>{try{let t=await fetch("".concat(k,"/user-management/fetch/").concat(e.userId),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}}),a=await t.json();t.ok?E(a):N("error",a.message)}catch(e){N("error",String(e))}},E=e=>{var t,a,l,n,r;s(null!=(t=e.username)?t:""),c(null!=(a=e.name)?a:""),u(""),x(null!=(l=e.email)?l:""),f(null!=(n=e.roles)?n:[]),b(null!=(r=e.isLocked)&&r)},L=async(t,l)=>{t.preventDefault();try{let t=await fetch("".concat(k,"/user-management/update/").concat(e.userId),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)},body:JSON.stringify({username:a,name:o,password:d,email:m,roles:h,isLocked:v})});if(401===t.status)return void localStorage.removeItem("token");let l=await t.json();if(!t.ok)return void N("error",l.message);e.onClose(),e.onUserUpdated(),N("success","Anv\xe4ndare uppdaterad!",4e3)}catch(e){N("error",String(e))}};return(0,l.jsx)(l.Fragment,{children:e.isOpen&&(0,l.jsx)("div",{className:"fixed inset-0 z-[var(--z-overlay)] h-svh w-screen bg-black/50",children:(0,l.jsx)(y.FocusTrap,{focusTrapOptions:{initialFocus:!1,allowOutsideClick:!0,escapeDeactivates:!1},children:(0,l.jsxs)("form",{ref:t,className:"relative top-1/2 left-1/2 z-[var(--z-modal)] flex max-h-[90svh] w-[90vw] max-w-3xl -translate-1/2 flex-col gap-4 overflow-y-auto rounded border-1 border-[var(--border-main)] bg-[var(--bg-modal)] p-4",onSubmit:t=>e.userId?L(t,e.userId):S(t),children:[(0,l.jsxs)("h2",{className:"mb-4 flex items-center text-2xl font-semibold",children:[(0,l.jsx)("span",{className:"mr-2 h-6 w-6 text-[var(--accent-color)]",children:e.userId?(0,l.jsx)(g.A,{}):(0,l.jsx)(p.A,{})}),(0,l.jsx)("span",{children:e.userId?"Redigera anv\xe4ndare":"L\xe4gg till ny anv\xe4ndare"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("hr",{className:"w-12 whitespace-nowrap text-[var(--border-main)]"}),(0,l.jsx)("h3",{className:"flex text-sm text-[var(--text-secondary)]",children:"Inloggningsuppgifter"}),(0,l.jsx)("hr",{className:"w-full text-[var(--border-main)]"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:gap-4",children:[(0,l.jsx)(r.A,{id:"username",label:"Anv\xe4ndarnamn",value:a,onChange:e=>s(String(e)),onModal:!0,required:!0}),null!==e.userId?(0,l.jsx)(r.A,{id:"password",label:"L\xf6senord",value:d,placeholder:"*********",onChange:e=>u(String(e)),onModal:!0}):(0,l.jsx)(r.A,{id:"password",label:"L\xf6senord",value:d,onChange:e=>u(String(e)),onModal:!0,required:!0})]}),(0,l.jsxs)("div",{className:"mt-8 flex items-center gap-2",children:[(0,l.jsx)("hr",{className:"w-12 text-[var(--border-main)]"}),(0,l.jsx)("h3",{className:"text-sm whitespace-nowrap text-[var(--text-secondary)]",children:"Anv\xe4ndardetaljer"}),(0,l.jsx)("hr",{className:"w-full text-[var(--border-main)]"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:gap-4",children:[(0,l.jsx)(r.A,{id:"name",label:"Namn",value:o,onChange:e=>c(String(e)),onModal:!0}),(0,l.jsx)(r.A,{id:"email",label:"Mejladress",value:m,onChange:e=>x(String(e)),onModal:!0})]}),(0,l.jsxs)("div",{className:"mt-8 flex items-center gap-2",children:[(0,l.jsx)("hr",{className:"w-12 text-[var(--border-main)]"}),(0,l.jsx)("h3",{className:"text-sm whitespace-nowrap text-[var(--text-secondary)]",children:"Beh\xf6righeter och status"}),(0,l.jsx)("hr",{className:"w-full text-[var(--border-main)]"})]}),(0,l.jsxs)("div",{className:"mb-8 flex justify-between gap-4",children:[(0,l.jsx)("div",{className:"flex w-[calc(50%-0.375rem)] min-w-36",children:(0,l.jsx)(A,{label:"Beh\xf6righeter",options:[{label:"Admin",value:"Admin"},{label:"Developer",value:"Developer"}],value:h,onChange:f,onModal:!0,required:!0})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,l.jsx)("button",{type:"button",role:"switch","aria-checked":v,className:(0,j.lj)(v),onClick:()=>b(e=>!e),children:(0,l.jsx)("div",{className:(0,j.XM)(v)})}),(0,l.jsx)("span",{className:"mb-0.5",children:"L\xe5s konto"})]})]}),(0,l.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,l.jsx)("button",{type:"button",onClick:e.onClose,className:"".concat(j.p9," grow"),children:"\xc5ngra"}),(0,l.jsx)("button",{type:"button",onClick:()=>{var e;null==(e=t.current)||e.requestSubmit()},className:"".concat(j.$e," grow-2"),children:e.userId?"Uppdatera":"L\xe4gg till"})]})]})})})})};var C=a(3107);let E=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}),L=e=>{let t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!e.isOpen)return;let a=a=>{let l=t.current,n=e.triggerRef&&e.triggerRef.current,r=a.target;l&&!l.contains(r)&&n&&!n.contains(r)&&e.onClose()};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[e.isOpen,e.onClose]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":"Sidomeny",onClick:()=>e.onClose(),className:"".concat(e.isOpen?"opacity-100":"pointer-events-none opacity-0"," fixed inset-0 z-[var(--z-overlay)] h-svh w-screen bg-black/50 transition-opacity duration-[var(--slow)]"),children:(0,l.jsx)("div",{ref:t,onClick:e=>e.stopPropagation(),className:"".concat(e.isOpen?"sm:translate-x-0 sm:translate-y-0 visible translate-y-0":"sm:translate-y-0 sm:translate-x-full invisible translate-y-full"," sm:w-128 sm:right-0 sm:top-0 sm:h-full sm:rounded-b-2xl sm:!rounded-r-none fixed bottom-0 z-[calc(var(--z-modal))] flex h-3/4 w-full flex-col rounded-l-2xl rounded-r-2xl rounded-b-none bg-[var(--bg-topbar)] shadow-[0_0_16px_0_rgba(0,0,0,0.125)] transition-[translate,visibility] duration-[var(--slow)]"),children:(0,l.jsx)(y.FocusTrap,{active:e.isOpen,focusTrapOptions:{initialFocus:!1,allowOutsideClick:!0,fallbackFocus:()=>t.current},children:(0,l.jsxs)("div",{className:"flex h-full flex-col",children:[(0,l.jsxs)("div",{className:"relative flex items-center justify-between p-4",children:[(0,l.jsx)("span",{className:"text-2xl font-semibold",children:e.label}),(0,l.jsx)("button",{onClick:()=>e.onClose(),className:"h-[32px] w-[32px] cursor-pointer duration-[var(--fast)] hover:text-[var(--accent-color)]",children:(0,l.jsx)(E,{})}),(0,l.jsx)("hr",{className:"absolute mt-16 -ml-4 flex w-[calc(100%+2rem)] text-[var(--border-main)]"})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto px-4",children:e.children})]})})})})})},R="pl-4 p-2 min-w-48 h-[40px] cursor-pointer border-1 border-t-0 border-[var(--border-secondary)] border-b-[var(--border-main)] text-left transition-[background] duration-[var(--fast)] hover:bg-[var(--bg-grid-header-hover)]",D="py-2 px-4 min-w-48 h-[40px] border-1 border-b-0 border-[var(--border-secondary)] text-left break-all",M="truncate font-semibold transition-colors duration-[var(--fast)] group-hover:text-[var(--accent-color)]",O="h-6 w-6 transition-[color,rotate] duration-[var(--fast)] group-hover:text-[var(--accent-color)]",I=e=>{let{filterRef:t,label:a,breakpoint:s,filterData:i}=e,[o,d]=(0,n.useState)(!1),u="relative hidden ";return"2xs"===s?u+="2xs:flex":"xs"===s?u+="xs:flex":"sm"===s?u+="sm:flex":"md"===s?u+="md:flex":"ml"===s?u+="ml:flex":"lg"===s?u+="lg:flex":"xl"===s?u+="xl:flex":"2xl"===s&&(u+="2xl:flex"),(0,l.jsxs)("div",{className:u,children:[(0,l.jsxs)("button",{ref:t,className:"".concat(j.Kt," group w-auto gap-2 px-4"),onClick:()=>{d(e=>!e)},children:[(0,l.jsx)("span",{className:"".concat(M," ").concat(o?"text-[var(--accent-color)]":""),children:a}),(0,l.jsx)(c.A,{className:"".concat(O," ").concat(o?"rotate-180 text-[var(--accent-color)]":"")})]}),(0,l.jsx)(C.A,{triggerRef:t,isOpen:o,onClose:()=>d(!1),children:(0,l.jsx)("div",{className:"flex w-full flex-col gap-4",children:i.map((e,t)=>{var a;return(0,l.jsxs)("div",{onClick:()=>e.setShow(!e.show),className:"group flex cursor-pointer justify-between",children:[(0,l.jsx)(r.A,{type:"checkbox",checked:e.show,label:e.label,readOnly:!0}),(0,l.jsxs)("span",{children:["(",null!=(a=e.count)?a:0,")"]})]},t)})})})]})},z=e=>{let{filterRef:t,label:a,filterData:s}=e,[i,o]=(0,n.useState)(!1),[d,u]=(0,n.useState)("0px");return(0,n.useEffect)(()=>{t.current&&u(i?"".concat(t.current.scrollHeight,"px"):"0px")},[i]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("button",{onClick:()=>o(e=>!e),className:"".concat(i?"text-[var(--accent-color)]":""," flex w-full cursor-pointer items-center justify-between py-4 duration-[var(--fast)] hover:text-[var(--accent-color)]"),children:[(0,l.jsx)("span",{className:"text-lg font-semibold",children:a}),(0,l.jsx)(c.A,{className:"".concat(i?"rotate-180":""," transition-rotate h-6 w-6 duration-[var(--fast)]")})]}),(0,l.jsx)("div",{style:{height:d},className:"overflow-hidden transition-[height] duration-[var(--slow)]",children:(0,l.jsx)("div",{ref:t,children:(0,l.jsx)("div",{className:"flex w-full flex-col",children:s.map((e,t)=>{var a;return(0,l.jsxs)("div",{onClick:()=>e.setShow(!e.show),className:"".concat(t===s.length-1?"mb-4":""," group flex cursor-pointer justify-between py-4"),children:[(0,l.jsx)(r.A,{type:"checkbox",checked:e.show,label:e.label,readOnly:!0}),(0,l.jsxs)("span",{children:["(",null!=(a=e.count)?a:0,")"]})]},t)})})})}),(0,l.jsx)("hr",{className:"-ml-4 flex w-[calc(100%+2rem)] text-[var(--border-main)]"})]})},B=e=>{let[t,a]=(0,n.useState)(8),[y,k]=(0,n.useState)(!1),[A,C]=(0,n.useState)(null),[E,B]=(0,n.useState)([]),[U,F]=(0,n.useState)(null),[Z,T]=(0,n.useState)([]),[K,_]=(0,n.useState)(!1),[q,H]=(0,n.useState)([]),[V,P]=(0,n.useState)(!1),[W,$]=(0,n.useState)(1),[J,X]=(0,n.useState)(5),[G,Q]=(0,n.useState)(null),[Y,ee]=(0,n.useState)("id"),[et,ea]=(0,n.useState)("asc"),[el,en]=(0,n.useState)(""),[er,es]=(0,n.useState)(!1),[ei,eo]=(0,n.useState)(!1),[ec,ed]=(0,n.useState)(!1),[eu,em]=(0,n.useState)(!1),ex=localStorage.getItem("token"),eh="https://ecommerce-9jo7.onrender.com",{notify:ef}=(0,i.d)(),ev=(0,n.useRef)(null),ep=(0,n.useRef)(null),eg=(0,n.useRef)(null),eb=(0,n.useRef)(null),ej=(0,n.useRef)(null),[ew,eN]=(0,n.useState)(!1),ey=async function(e,t,a,l){let n=!(arguments.length>4)||void 0===arguments[4]||arguments[4];try{var r,s;n&&k(!0);let i=new URLSearchParams({page:String(e),pageSize:String(t),sortBy:a,sortOrder:l,search:el});ec&&!eu?i.append("isLocked","true"):!ec&&eu&&i.append("isLocked","false"),er&&i.append("roles","Admin"),ei&&i.append("roles","Developer");let o=await fetch("".concat(eh,"/user-management?").concat(i.toString()),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ex)}});if(401===o.status)return void localStorage.removeItem("token");let c=await o.json();if(!o.ok)return void ef("error",c.message);B(Array.isArray(c.items)?c.items:[]),Q(null!=(r=c.totalCount)?r:0),C(null!=(s=c.counts)?s:null)}catch(e){}finally{n&&k(!1)}},ek=async e=>{try{let t=await fetch("".concat(eh,"/user-management/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ex)}});if(401===t.status)return void localStorage.removeItem("token");let a=await t.json();if(!t.ok)return void ef("error",a.message);await ey(W,J,Y,et),ef("success","Anv\xe4ndare borttagen!",4e3)}catch(e){ef("error",String(e))}};(0,n.useEffect)(()=>{ey(W,J,Y,et)},[W,J,Y,et,el,er,ei,ec,eu]),(0,n.useEffect)(()=>{$(1)},[el,er,ei,ec,eu]);let eA=e=>{let t=e===Y&&"asc"===et?"desc":"asc";ee(e),ea(t),ey(W,J,e,t,!1)},eS=e=>Y!==e?(0,l.jsx)(d,{className:"h-6 w-6"}):"asc"===et?(0,l.jsx)(u,{className:"h-6 w-6"}):(0,l.jsx)(c.A,{className:"h-6 w-6"}),eC=E.map(e=>e.id),eE=eC.length>0&&eC.every(e=>Z.includes(e)),eL=e=>{Z.includes(e)?T(Z.filter(t=>t!==e)):T([...Z,e])},eR=()=>{eE?T(Z.filter(e=>!eC.includes(e))):T([...new Set([...Z,...eC])])};(0,n.useEffect)(()=>{let e=()=>{let e=window.innerWidth,t=3;e>=640&&(t+=1),e>=1024&&(t+=1),e>=1280&&(t+=1),a(t)};return e(),window.addEventListener("resize",e),()=>removeEventListener("resize",e)},[]);let eD=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];H(e),P(e=>!e)},eM=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;F(e),_(!0)},eO=e=>{let{visible:t,onClickEvent:a,label:n}=e;return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("button",{className:"".concat(j.Kt," group w-auto gap-2 px-4"),onClick:()=>{a(!1)},children:[(0,l.jsx)("span",{className:"".concat(M),children:n}),(0,l.jsx)(m,{className:"".concat(O)})]})})},eI=e=>{let{sortingItem:t,label:a,labelAsc:n,labelDesc:r,classNameAddition:s}=e;return(0,l.jsx)(o.A,{content:Y===t&&"asc"===et?"Sortera "+n:"Sortera "+r,children:(0,l.jsx)("th",{className:"".concat(R," ").concat(s||""),onClick:()=>eA(t),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eA(t))},tabIndex:0,"aria-sort":Y===t?"asc"===et?"ascending":"descending":"none",children:(0,l.jsxs)("div",{className:"relative flex gap-2",children:[(0,l.jsx)("span",{className:"w-full truncate overflow-hidden text-ellipsis",children:a}),(0,l.jsx)("span",{className:"flex",children:eS(t)})]})})})},ez=e=>{let{children:t,classNameAddition:a}=e;return(0,l.jsx)("td",{className:"".concat(D," ").concat(a||""),children:(0,l.jsx)("div",{className:"truncate overflow-hidden text-ellipsis",children:t})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S,{isOpen:K,onClose:()=>{_(!1),F(null)},userId:U,onUserUpdated:()=>{ey(W,J,Y,et)}}),(0,l.jsx)(s.A,{isOpen:V,onClose:()=>{eD(),H([])},onConfirm:async()=>{for(let e of q)await ek(e);P(!1),H([]),T([])}}),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,l.jsx)(o.A,{content:"L\xe4gg till ny anv\xe4ndare",lgHidden:!0,children:(0,l.jsx)("button",{className:"".concat(j.$e," sm:w-56 sm:min-w-56"),onClick:()=>{eM()},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eM())},tabIndex:0,children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 truncate",children:[(0,l.jsx)(p.A,{className:"h-6"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"L\xe4gg till ny anv\xe4ndare"})]})})}),(0,l.jsx)(o.A,{content:0===Z.length?"V\xe4lj en anv\xe4ndare":1===Z.length?"Redigera anv\xe4ndare":"Du kan bara redigera en anv\xe4ndare i taget!",lgHidden:1===Z.length,children:(0,l.jsx)("button",{className:"".concat(j.p9," sm:w-56 sm:min-w-56"),onClick:()=>{eM(Z[0])},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eM(Z[0]))},tabIndex:0,disabled:0===Z.length||Z.length>1,children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 truncate",children:[(0,l.jsx)(g.A,{className:"h-6 min-h-6 w-6 min-w-6"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"Redigera anv\xe4ndare"})]})})}),(0,l.jsx)(o.A,{content:0===Z.length?"V\xe4lj en eller fler anv\xe4ndare":"Ta bort anv\xe4ndare (".concat(Z.length,")"),lgHidden:Z.length>0,children:(0,l.jsx)("button",{className:"".concat(j.s9," 3xs:ml-auto lg:w-56 lg:min-w-56"),onClick:()=>eD(Z),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eD(Z))},tabIndex:0,disabled:0===Z.length,children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 truncate",children:[(0,l.jsx)(b.A,{className:"h-6"}),(0,l.jsxs)("span",{className:"hidden lg:block",children:["Ta bort anv\xe4ndare",(0,l.jsx)("span",{children:Z.length>0?" (".concat(Z.length,")"):""})]})]})})})]}),(0,l.jsxs)("div",{className:"3xs:flex-nowrap flex flex-wrap justify-between gap-4",children:[(0,l.jsx)("div",{className:"flex w-full items-center gap-4",children:(0,l.jsx)("div",{className:"flex w-full items-center justify-start",children:(0,l.jsx)(r.A,{icon:(0,l.jsx)(x,{}),placeholder:"S\xf6k anv\xe4ndare",value:el,onChange:e=>en(String(e).toLowerCase())})})}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(I,{filterRef:ev,label:"Beh\xf6righeter",breakpoint:"sm",filterData:[{label:"Admin",show:er,setShow:es,count:null==A?void 0:A.filteredAdmins},{label:"Developer",show:ei,setShow:eo,count:null==A?void 0:A.filteredDevelopers}]}),(0,l.jsx)(I,{filterRef:ep,label:"Status",breakpoint:"ml",filterData:[{label:"L\xe5st",show:ec,setShow:ed,count:null==A?void 0:A.filteredLocked},{label:"Uppl\xe5st",show:eu,setShow:em,count:null==A?void 0:A.filteredUnlocked}]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{className:"".concat(j.Kt," group xs:w-auto xs:px-4 gap-2"),onClick:()=>{eN(!0)},children:[(0,l.jsx)("span",{className:"".concat(M," xs:flex hidden"),children:"Alla filter"}),(0,l.jsx)(h,{className:"".concat(O)})]}),(0,l.jsx)(L,{triggerRef:eg,isOpen:ew,onClose:()=>eN(!1),label:"Alla filter",children:(0,l.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(z,{filterRef:eb,label:"Beh\xf6righeter",filterData:[{label:"Admin",show:er,setShow:es,count:null==A?void 0:A.filteredAdmins},{label:"Developer",show:ei,setShow:eo,count:null==A?void 0:A.filteredDevelopers}]}),(0,l.jsx)(z,{filterRef:ej,label:"Status",filterData:[{label:"L\xe5st",show:ec,setShow:ed,count:null==A?void 0:A.filteredLocked},{label:"Uppl\xe5st",show:eu,setShow:em,count:null==A?void 0:A.filteredUnlocked}]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 py-4 sm:flex-row",children:[(0,l.jsxs)("button",{onClick:()=>eN(!1),className:"".concat(j.$e," w-full"),children:["Visa"," ",(0,l.jsx)("span",{className:"font-normal",children:null!=G?G:0})]}),(0,l.jsx)("button",{onClick:()=>{eo(!1),es(!1),ed(!1),em(!1)},className:"".concat(j.p9," w-full"),disabled:!ei&&!er&&!ec&&!eu,children:"Rensa alla"})]})]})})]})]})]}),(er||ei||ec||eu)&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,l.jsx)("span",{className:"flex items-center font-semibold text-[var(--text-secondary)]",children:"Aktiva filter:"}),(0,l.jsx)(eO,{visible:er,onClickEvent:es,label:"Admin"}),(0,l.jsx)(eO,{visible:ei,onClickEvent:eo,label:"Developer"}),(0,l.jsx)(eO,{visible:ec,onClickEvent:ed,label:"L\xe5st"}),(0,l.jsx)(eO,{visible:eu,onClickEvent:em,label:"Uppl\xe5st"}),(0,l.jsx)("button",{className:"group w-auto cursor-pointer rounded-full px-4 transition-colors duration-[var(--fast)] hover:bg-[var(--bg-navbar-link)]",onClick:()=>{es(!1),eo(!1),ed(!1),em(!1)},children:(0,l.jsx)("span",{className:"font-semibold text-[var(--accent-color)]",children:"Rensa alla"})})]}),(0,l.jsxs)("span",{className:"-mb-2 flex items-end text-[var(--text-secondary)]",children:["Visar ",(W-1)*J+1,"-",Math.min(W*J,null!=G?G:0)," av"," ",null!=G?G:0]})]}),(0,l.jsx)("div",{className:"flex w-full flex-col",children:(0,l.jsx)("div",{className:"flex w-full overflow-x-auto rounded border-1 border-[var(--border-main)]",children:(0,l.jsxs)("table",{className:"w-full table-fixed border-collapse",children:[(0,l.jsx)("thead",{className:"".concat(!e.isConnected||y?"pointer-events-none":""," bg-[var(--bg-grid-header)]"),children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"".concat(R," !w-[40px] !min-w-[40px] !border-l-0 !pl-2"),onClick:eR,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eR())},children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(r.A,{type:"checkbox",checked:eE,indeterminate:!eE&&eC.some(e=>Z.includes(e)),readOnly:!0})})}),(0,l.jsx)(eI,{sortingItem:"itemname",label:"Anv\xe4ndarnamn",labelAsc:"anv\xe4ndarnamn \xd6-A",labelDesc:"anv\xe4ndarnamn A-\xd6"}),(0,l.jsx)(eI,{sortingItem:"name",label:"Namn",labelAsc:"namn \xd6-A",labelDesc:"namn A-\xd6",classNameAddition:"hidden sm:table-cell"}),(0,l.jsx)(eI,{sortingItem:"email",label:"Mejladress",labelAsc:"mejladress \xd6-A",labelDesc:"mejladress A-\xd6",classNameAddition:"hidden lg:table-cell"}),(0,l.jsx)(eI,{sortingItem:"roles",label:"Beh\xf6righeter",labelAsc:"beh\xf6righeter \xd6-A",labelDesc:"beh\xf6righeter A-\xd6",classNameAddition:"hidden xl:table-cell"}),(0,l.jsx)(eI,{sortingItem:"isLocked",label:"Status",labelAsc:"l\xe5sta konton",labelDesc:"uppl\xe5sta konton",classNameAddition:"w-28 min-w-28 border-r-0 hidden 2xs:table-cell"})]})}),(0,l.jsx)("tbody",{children:e.isConnected&&0!==E.length?y?(0,l.jsx)(l.Fragment,{children:Array.from({length:Math.min(J,null!=G?G:J)}).map((e,a)=>(0,l.jsx)("tr",{className:"bg-[var(--bg-grid)]",children:(0,l.jsx)("td",{colSpan:t,className:"h-[40px]",children:a===Math.floor(Math.min(J,null!=G?G:J)/2)&&(0,l.jsx)("div",{className:"flex h-[40px]",children:(0,l.jsx)(w.A,{sideMessage:(null!=G?G:0)<=2,icon:"loading",content:"H\xe4mtar inneh\xe5ll..."})})})},"loading-".concat(a)))}):(0,l.jsx)(l.Fragment,{children:E.map((e,t)=>(0,l.jsxs)("tr",{className:t%2==0?"bg-[var(--bg-grid)]":"bg-[var(--bg-grid-zebra)]",children:[(0,l.jsx)("td",{className:"".concat(D," !w-[40px] !min-w-[40px] cursor-pointer !border-l-0 transition-[background] duration-[var(--fast)] hover:bg-[var(--bg-grid-header-hover)]"),onClick:()=>eL(e.id),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),eL(e.id))},children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(r.A,{type:"checkbox",checked:Z.includes(e.id),readOnly:!0})})})}),(0,l.jsx)(ez,{children:e.username}),(0,l.jsx)(ez,{classNameAddition:"hidden sm:table-cell",children:e.name}),(0,l.jsx)(ez,{classNameAddition:"hidden lg:table-cell",children:e.email}),(0,l.jsx)(ez,{classNameAddition:"hidden xl:table-cell",children:(Array.isArray(e.roles)?e.roles:[e.roles||""]).join(", ")}),(0,l.jsx)(ez,{classNameAddition:" w-28 min-w-28 border-r-0 2xs:table-cell hidden",children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("span",{className:"".concat(e.isLocked?"bg-[var(--locked)]":"bg-[var(--unlocked)]"," flex h-6 w-64 items-center justify-center rounded-xl text-sm font-semibold text-[var(--text-main-reverse)]"),children:e.isLocked?"L\xe5st":"Uppl\xe5st"})})})]},e.id))}):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:t,className:"h-57",children:e.isConnected?(0,l.jsx)(w.A,{icon:"search",content:el||er||ei||ec||eu?"Inga anv\xe4ndare kunde hittas med det s\xf6kkriteriet.":"Det finns inga anv\xe4ndare."}):(0,l.jsx)(w.A,{icon:"server",content:"server"})})})})]})})}),(0,l.jsxs)("div",{className:"flex w-full flex-wrap justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,l.jsx)("span",{className:"",children:"Antal per sida:"}),(0,l.jsx)("div",{className:"3xs:min-w-20",children:(0,l.jsx)(N.A,{options:[{label:"5",value:"5"},{label:"15",value:"15"},{label:"25",value:"25"}],value:String(J),onChange:e=>{let t=Number(e),a=Math.ceil((null!=G?G:0)/t);X(t),W>a&&$(a)}})})]}),(0,l.jsx)("div",{className:"gap-4",children:(0,l.jsxs)("div",{className:"-mt-2 flex flex-wrap items-center gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>$(e=>Math.max(e-1,1)),disabled:1===W,className:"".concat(j.U0),children:(0,l.jsx)(f,{className:"min-h-full min-w-full"})}),(0,l.jsxs)("span",{className:"truncate text-[var(--text-secondary)]",children:["Sida ",W," av"," ",Math.max(1,Math.ceil((null!=G?G:0)/J))]}),(0,l.jsx)("button",{type:"button",onClick:()=>$(e=>e<Math.max(1,Math.ceil((null!=G?G:0)/J))?e+1:e),disabled:W>=Math.ceil((null!=G?G:0)/J),className:"".concat(j.U0),children:(0,l.jsx)(v.A,{className:"min-h-full min-w-full"})})]})})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col",children:[(0,l.jsx)("div",{className:"flex items-center rounded-t border-1 border-[var(--border-main)] bg-[var(--bg-grid-header)] px-3 py-2",children:(0,l.jsx)("span",{className:"truncate font-semibold",children:"Anv\xe4ndarinformation"})}),(0,l.jsx)("div",{className:"".concat(0===Z.length||Z.length>1?"items-center":""," flex max-h-96 min-h-80 overflow-x-auto rounded-b border-1 border-t-0 border-[var(--border-main)] p-4"),children:0===Z.length?(0,l.jsx)(w.A,{icon:"user",content:"H\xe4r kan du se information om vald anv\xe4ndare. V\xe4lj en i tabellen ovan!"}):Z.length>1?(0,l.jsx)(w.A,{icon:"beware",content:"Kan inte visa information om flera anv\xe4ndare samtidigt."}):(0,l.jsx)("div",{className:"flex",children:E.filter(e=>e.id===Z[0]).map(e=>(0,l.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,l.jsxs)("div",{children:[e.isOnline?(0,l.jsx)("span",{className:"font-semibold text-[var(--unlocked)]",children:"Online"}):(0,l.jsx)("span",{className:"font-semibold text-[var(--locked)]",children:"Offline"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Anv\xe4ndarnamn: "}),e.username]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Namn: "}),e.name]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Mejladress: "}),e.email]}),(0,l.jsxs)("p",{className:"flex",children:[(0,l.jsx)("strong",{children:"Beh\xf6righeter:\xa0"}),e.roles.map((t,a)=>(0,l.jsxs)("span",{children:[t,a<e.roles.length-1?",\xa0":""]},a))]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("span",{className:"".concat(e.isLocked?"bg-[var(--locked)]":"bg-[var(--unlocked)]"," flex h-6 w-20 items-center justify-center rounded-xl text-sm font-semibold text-[var(--text-main-reverse)]"),children:e.isLocked?"L\xe5st":"Uppl\xe5st"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Senast inloggad: "}),e.lastLogin?new Date(e.lastLogin).toLocaleString():"Aldrig"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Konto skapat: "}),new Date(e.creationDate).toLocaleString()]})]})]},e.id))})})]})]})]})}}}]);