(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1703:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(2115);let n=()=>{let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(null),[s,l]=(0,r.useState)([]),[o,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[v,p]=(0,r.useState)(""),[f,b]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),w="https://ecommerce-9jo7.onrender.com",N=localStorage.getItem("token"),y=()=>{l([]),d(""),i(null),u(""),x(""),p("")},A=async()=>{try{t(!0);let e=await fetch("".concat(w,"/ping"));if(b(e.ok),!e.ok||!N){n(!1),y();return}let a=await fetch("".concat(w,"/user/check-login"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}});if(!a.ok){n(!1),y();return}let r=await a.json(),s=!0===r.isLoggedIn;if(n(s),s){let e=await fetch("".concat(w,"/user/info"),{headers:{Authorization:"Bearer ".concat(N)}});if(!e.ok)return void y();let t=await e.json();l(t.roles),d(t.username),i(t.userId),u(t.firstName),x(t.lastName),p(t.email)}else y()}catch(e){b(!1),n(!1),y()}finally{t(!1),j(!0)}};return(0,r.useEffect)(()=>{A()},[]),{isLoggedIn:a,isAdmin:s.includes("Admin"),isDev:s.includes("Developer"),isConnected:f,isAuthReady:g,username:c,userId:o,firstName:m,lastName:h,email:v,fetchAuthData:A}}},1972:(e,t,a)=>{"use strict";a.d(t,{$U:()=>c,$e:()=>r,Kt:()=>d,U0:()=>o,XM:()=>u,Xd:()=>i,eA:()=>s,lj:()=>m,p9:()=>n,s9:()=>l});let r="whitespace-nowrap h-[40px] w-[40px] cursor-pointer rounded bg-[var(--button-primary)] p-2 font-semibold text-[var(--text-main-reverse)] transition-colors hover:bg-[var(--button-primary-hover)] hover:text-[var(--text-main)] active:bg-[var(--button-primary-active)] disabled:cursor-not-allowed disabled:opacity-25 disabled:hover:bg-[var(--button-primary)] z-[calc(var(--z-base)+1)]",n="whitespace-nowrap h-[40px] w-[40px] cursor-pointer rounded border-1 border-[var(--button-secondary)] p-2 font-semibold transition-colors hover:border-[var(--button-secondary-hover)] active:border-[var(--button-secondary-active)] disabled:cursor-not-allowed disabled:opacity-25 disabled:hover:border-[var(--border-main)] z-[calc(var(--z-base)+1)]",s="h-[40px] w-[40px] cursor-pointer rounded bg-[var(--button-delete)] p-2 font-semibold text-[var(--text-main-reverse)] transition-colors hover:bg-[var(--button-delete-hover)] hover:text-[var(--text-main)] active:bg-[var(--button-delete-active)] disabled:cursor-not-allowed disabled:opacity-25 disabled:hover:bg-[var(--button-delete)] z-[calc(var(--z-base)+1)]",l="h-[40px] w-[40px] cursor-pointer rounded border-1 border-[var(--button-secondary)] p-2 font-semibold transition-colors hover:border-[var(--button-delete)] active:border-[var(--button-delete-active)] disabled:cursor-not-allowed disabled:opacity-25 disabled:hover:border-[var(--border-main)] z-[calc(var(--z-base)+1)]",o="h-[24px] w-[24px] flex items-center justify-center cursor-pointer transition-colors duration-[var(--fast)] hover:text-[var(--button-primary)] active:text-[var(--button-primary-active)] z-[calc(var(--z-base)+1)] disabled:opacity-25 disabled:hover:text-[var(--text-main)] disabled:cursor-not-allowed",i="h-[24px] w-[24px] flex items-center justify-center cursor-pointer transition-colors duration-[var(--fast)] hover:text-[var(--button-delete)] active:text-[var(--button-delete-active)] z-[calc(var(--z-base)+1)]",c="cursor-pointer font-semibold text-[var(--accent-color)] transition-[color] duration-[var(--fast)] hover:text-[var(--accent-color-hover)] z-[calc(var(--z-base)+1)]",d="h-[40px] w-[40px] flex justify-center items-center cursor-pointer bg-[var(--bg-navbar-link)] rounded-full z-[calc(var(--z-base)+1)]",m=e=>"".concat(e?"bg-[var(--accent-color)]":"bg-gray-500"," h-6 w-10 cursor-pointer rounded-full px-0.5"),u=e=>"".concat(e?"translate-x-4":"translate-x-0"," h-5 w-5 rounded-full bg-white duration-[var(--fast)]")},2226:()=>{},3107:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(5155),n=a(2115);let s=e=>{let t=(0,n.useRef)(null),[a,s]=(0,n.useState)("16rem"),l=()=>{let e=t.current;if(!e)return;let a=e.getBoundingClientRect(),r=Math.min(window.innerWidth-a.left,a.right-80,256);s("".concat(r,"px"))};return(0,n.useEffect)(()=>{if(!e.isOpen||!t.current)return;let a=requestAnimationFrame(l);return()=>cancelAnimationFrame(a)},[e.isOpen]),(0,n.useEffect)(()=>{let e=new ResizeObserver(l);return t.current&&e.observe(t.current),window.addEventListener("resize",l),()=>{e.disconnect(),window.removeEventListener("resize",l)}},[]),(0,n.useEffect)(()=>{if(!e.isOpen)return;l();let a=a=>{let r=t.current,n=e.triggerRef&&e.triggerRef.current,s=a.target;r&&!r.contains(s)&&n&&!n.contains(s)&&e.onClose()};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[e.isOpen,e.onClose]),(0,r.jsx)("div",{ref:t,role:"dialog","aria-hidden":!e.isOpen,className:"".concat(e.isOpen?"visible opacity-100":"invisible opacity-0"," absolute top-full right-0 z-[calc(var(--z-tooltip)+1)] mt-1 flex flex-col gap-8 overflow-x-hidden overflow-y-auto rounded-2xl bg-[var(--bg-topbar)] p-4 break-words shadow-[0_0_16px_0_rgba(0,0,0,0.125)] transition-[opacity,visibility] duration-[var(--fast)]"),style:{width:a},children:e.children})}},3310:(e,t,a)=>{"use strict";a.d(t,{default:()=>Z});var r=a(5155),n=a(2115),s=a(4219),l=a(9994),o=a(7820),i=a(3679),c=a(4330),d=a(4853),m=a(5579),u=a(7538),h=a(6874),x=a.n(h),v=a(5695),p=a(4541);let f=e=>{let t=(0,v.usePathname)()===e.href;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p.A,{content:e.tooltip?e.tooltip:"",side:"right",children:(0,r.jsx)(x(),{href:e.href,className:"".concat(t?"text-[var(--accent-color)]":""," ").concat(e.disabled?"cursor-not-allowed opacity-33":""," group flex h-[40px] w-[40px] items-center justify-center gap-4 rounded-lg border-1 border-transparent p-2 transition-[background,max-width] duration-[var(--fast)] hover:bg-[var(--bg-navbar-link)] md:w-full md:max-w-full md:justify-between"),children:(0,r.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,r.jsxs)("span",{className:"relative flex min-h-6 min-w-6 items-center",children:[(0,r.jsx)(e.icon,{className:"".concat(t?"opacity-0":"opacity-100"," absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0")}),(0,r.jsx)(e.iconHover,{className:"".concat(t?"opacity-100":"opacity-0"," absolute text-[var(--accent-color)] transition-opacity duration-[var(--fast)] group-hover:opacity-100")})]}),(0,r.jsx)("span",{className:"".concat(t?"font-bold":""," hidden truncate md:flex"),children:e.label})]})})})})};var b=a(1703),g=a(2237);let j=e=>{let t=(0,n.useRef)(null),a=(0,n.useRef)(null),[s,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!1),{isLoggedIn:c,isAdmin:d,isDev:m}=(0,b.A)(),u=(0,v.usePathname)(),h=e.menus.flatMap(e=>e.items).some(e=>e.href&&u.startsWith(e.href)),p=e.menus.filter(e=>(!e.requiresLogin||c)&&(!e.requiresAdmin||d)&&(!e.requiresDev||m)).length;(0,n.useEffect)(()=>{if(!s)return;let e=t.current;if(!e)return;let a=new ResizeObserver(()=>{i(e.scrollHeight>e.clientHeight)});return a.observe(e),i(e.scrollHeight>e.clientHeight),()=>{a.disconnect()}},[s]),(0,n.useEffect)(()=>{if(!s)return;let e=e=>{let r=t.current,n=a.current,s=e.target;r&&!r.contains(s)&&n&&!n.contains(s)&&l(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[s]);let f="";return f=o?"w-45":"w-42",s?f+=" max-w-45":f=" max-w-0",1===p?s?o?f+=" sm:w-45 sm:max-w-45":f+=" sm:w-42 sm:max-w-42":o?f+=" sm:w-42":f+=" sm:w-45":2===p?s?o?f+=" sm:w-85 sm:max-w-85":f+=" sm:w-82 sm:max-w-82":o?f+=" sm:w-82":f+=" sm:w-85":p>=3&&(s?o?f+=" sm:w-125 sm:max-w-125":f+=" sm:w-122 sm:max-w-122":o?f+=" sm:w-122":f+=" sm:w-125"),(0,r.jsx)(r.Fragment,{children:(!e.requiresLogin||c)&&(!e.requiresAdmin||d)&&(!e.requiresDev||m)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("button",{ref:a,onClick:()=>{if(s)l(!1);else{var t;l(!0),null==(t=e.onOpen)||t.call(e)}},"aria-haspopup":"true","aria-controls":"submenu-menu","aria-expanded":s,className:"".concat(s?"bg-[var(--bg-navbar-link)]":""," ").concat(h?"text-[var(--accent-color)]":""," group flex h-[40px] w-[40px] cursor-pointer items-center justify-center rounded-lg p-2 transition-colors duration-[var(--fast)] hover:bg-[var(--bg-navbar-link)] md:w-full md:justify-between"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"relative flex h-6 w-6 items-center",children:[(0,r.jsx)(e.icon,{className:"".concat(s||h?"opacity-0":"opacity-100"," absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0")}),(0,r.jsx)(e.iconHover,{className:"".concat(s||h?"opacity-100":"opacity-0"," absolute text-[var(--accent-color)] transition-opacity duration-[var(--fast)] group-hover:opacity-100")})]}),(0,r.jsx)("span",{className:"".concat(h?"font-bold":""," hidden truncate overflow-hidden md:flex"),children:e.label})]}),(0,r.jsx)(g.A,{className:"".concat(s?"rotate-180 text-[var(--accent-color)]":""," h-0 w-0 rotate-0 transition-[color,rotate] duration-[var(--fast)] group-hover:text-[var(--accent-color)] md:h-6 md:w-6")})]})}),(0,r.jsx)("div",{ref:t,id:"submenu-menu",inert:!s,className:" ".concat(f," ").concat(s?"visible":"invisible"," ").concat(e.hasScrollbar?"left-22 md:left-67":"left-19 md:left-64"," fixed top-0 h-full overflow-x-hidden border-r-1 border-[var(--border-main)] bg-[var(--bg-navbar)] transition-all duration-[var(--slow)]"),children:(0,r.jsxs)("div",{className:"my-4 ml-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(e.iconHover,{className:"flex max-h-4 min-h-4 max-w-4 min-w-4 text-[var(--accent-color)]"}),(0,r.jsx)("span",{className:"truncate text-xs",children:e.label})]}),(0,r.jsx)("div",{className:"grid gap-2 ".concat(1===p?"grid-cols-1":2===p?"sm:grid-cols-2":"sm:grid-cols-3"),children:e.menus.map((e,t)=>(0,r.jsx)("div",{children:(!e.requiresLogin||c)&&(!e.requiresAdmin||d)&&(!e.requiresDev||m)&&(0,r.jsxs)("ul",{className:"".concat(s?"opacity-100":"opacity-0"," w-34 transition-opacity duration-[var(--fast)]"),children:[(0,r.jsx)("li",{className:"truncate border-[var(--border-main)] pt-6 pb-1",children:e.label}),(0,r.jsx)("hr",{className:"text-[var(--border-main)]"}),e.items.map((e,t)=>{var a;let n=e.href&&u.startsWith(e.href);return(0,r.jsx)("div",{children:(!e.requiresLogin||c)&&(!e.requiresAdmin||d)&&(!e.requiresDev||m)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("li",{className:"".concat(e.title?"truncate pt-4 pb-1 text-xs font-semibold":""," ").concat(e.title||0!==t?"":"pt-2"),children:null!=(a=e.title)?a:""}),(0,r.jsx)("li",{className:"w-34 rounded-lg transition-colors hover:bg-[var(--bg-navbar-link)]",children:e.href?(0,r.jsx)(x(),{onClick:()=>l(!1),href:e.href,tabIndex:s?0:-1,className:"".concat(n?"font-bold text-[var(--accent-color)]":"text-[var(--text-navbar)]"," flex h-full w-full truncate p-2 text-sm"),children:e.label}):(0,r.jsx)("button",{onClick:e.onClick,tabIndex:s?0:-1,className:"flex h-full w-full cursor-pointer truncate p-2 text-sm text-[var(--text-navbar)]",children:e.label})})]})},t)})]})},t))})]})})]})})},w=()=>{let{isLoggedIn:e}=(0,b.A)(),[t,a]=(0,n.useState)(null),[r,s]=(0,n.useState)(!1),l="https://ecommerce-9jo7.onrender.com",o=localStorage.getItem("token");(0,n.useEffect)(()=>{e&&(async()=>{s(!0);try{let e=await fetch("".concat(l,"/user-preferences"),{headers:{Authorization:"Bearer ".concat(o)}});if(!e.ok)return;let t=await e.json();a(t.theme)}catch(e){}finally{s(!1)}})()},[e]);let i=async e=>{try{await fetch("".concat(l,"/user-preferences/theme"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({Theme:e})}),a(e)}catch(e){}};return(0,n.useEffect)(()=>{t&&(document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),window.dispatchEvent(new Event("theme-changed")))},[t]),{userTheme:t,updateUserTheme:i,isLoadingUserPrefs:r}},N=()=>{let[e,t]=(0,n.useState)(null),{userTheme:a,updateUserTheme:r}=w();return(0,n.useEffect)(()=>{let e=()=>{t(document.documentElement.getAttribute("data-theme"))};return e(),window.addEventListener("theme-changed",e),()=>{window.removeEventListener("theme-changed",e)}},[]),{toggleTheme:(0,n.useCallback)(()=>{let t="dark"===e?"light":"dark";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),window.dispatchEvent(new Event("theme-changed")),r(t)},[r]),userTheme:a,currentTheme:e}};var y=a(7877),A=a(8500);let k=e=>{let t=(0,n.useRef)(null),[a,h]=(0,n.useState)([]),{isAuthReady:v,isDev:p,isAdmin:g}=(0,b.A)(),{currentTheme:w}=N(),{notify:k}=(0,A.d)(),S="/eCommerce",C=localStorage.getItem("token"),E=async()=>{try{let e=await fetch("".concat("https://ecommerce-9jo7.onrender.com","/unit"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)}}),t=await e.json();if(!e.ok)return void k("error",t.message);let a=t.items.filter(e=>!e.isHidden).reduce((e,t)=>{let a=t.unitGroupName;return e[a]||(e[a]=[]),e[a].push({label:t.name,href:"#"}),e},{}),r=Object.entries(a).flatMap(e=>{let[t,a]=e;return[...a.map((e,a)=>({...e,title:0===a?t:void 0}))]});r.length>0?h([{label:"Enheter",items:r}]):h([])}catch(e){}};return(0,n.useEffect)(()=>{let a=t.current;if(!a)return;let r=new ResizeObserver(()=>{e.setHasScrollbar(a.scrollHeight>a.clientHeight)});return r.observe(a),e.setHasScrollbar(a.scrollHeight>a.clientHeight),()=>{r.disconnect()}},[v]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("nav",{className:"".concat(e.hasScrollbar?"max-w-22 md:max-w-67":"max-w-19 md:max-w-64"," transtion-[max-width] fixed z-[calc(var(--z-overlay)-1)] flex h-full w-full flex-col bg-[var(--bg-navbar)] duration-[var(--slow)]"),children:(0,r.jsxs)("div",{className:"relative h-full w-full pt-18",children:[(0,r.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 h-full w-full border-r-1 border-[var(--border-main)]"}),v?(0,r.jsxs)("div",{ref:t,id:"navbar-menu",role:"navigation","aria-label":"Huvudmeny",className:"flex h-full flex-col gap-4 overflow-x-hidden p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"fixed top-0 flex h-18 transition-transform duration-[var(--slow)]",children:(0,r.jsx)(x(),{href:"/",className:"mt-1.25 -ml-2.25 flex h-15 max-w-17 min-w-17 md:max-w-17 md:min-w-40","aria-label":"Startsida",children:(0,r.jsxs)("picture",{children:[(0,r.jsx)("source",{srcSet:"".concat(S,"/images/logo_expnd_").concat("dark"===w?"dark":"light",".svg"),media:"(min-width: 768px)"}),(0,r.jsx)("img",{src:"".concat(S,"/images/logo_clpsd_").concat("dark"===w?"dark":"light",".svg"),alt:"Logga",className:"h-full w-full"})]})})}),(0,r.jsx)("hr",{className:"mb-4 rounded-full text-[var(--border-main)] md:mb-8"}),p&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"hidden pb-1 text-xs font-semibold whitespace-nowrap uppercase md:flex",children:"Utvecklare"}),(0,r.jsx)(f,{href:"/users/",label:"Hantera anv\xe4ndare",icon:s.A,iconHover:c.A}),(0,r.jsx)("hr",{className:"mt-4 mb-4 rounded-full text-[var(--border-main)] md:mb-8"})]}),(0,r.jsx)("span",{className:"hidden pb-1 text-xs font-semibold whitespace-nowrap uppercase md:flex",children:"Din dashboard"}),(0,r.jsx)(f,{href:"/",label:"Startsida",icon:l.A,iconHover:d.A}),(0,r.jsx)(j,{label:"Rapportering",icon:o.A,iconHover:m.A,menus:[...a,{label:"Administrera",requiresAdmin:!0,items:[{title:"Hantera",href:"/categories/",label:"Kategorier"},{href:"/units/",label:"Enheter"},{href:"/unitGroups/",label:"Enhetsgrupper"}]}],hasScrollbar:e.hasScrollbar,onOpen:()=>{v&&0===a.length&&E()}}),(0,r.jsx)(f,{tooltip:"Ej implementerat!",disabled:!0,href:"#",label:"Pulstavlor",icon:i.A,iconHover:u.A})]}),(0,r.jsx)("div",{className:"mb-4"})]}):(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("span",{className:"hidden md:inline",children:(0,r.jsx)(y.A,{icon:"loading",content:"H\xe4mtar inneh\xe5ll..."})}),(0,r.jsx)("span",{className:"inline md:hidden",children:(0,r.jsx)(y.A,{icon:"loading"})})]})]})})})};var S=a(1972),C=a(6535),E=a(4521),H=a(4086),z=a(8775),L=a(3219),I=a(977),O=a(1038),T=a(8828),P=a(4170),_=a(1131),U=a(7124),R=a(7186),q=a(8444),F=a(337),B=a(3107);let D=e=>(0,r.jsx)(r.Fragment,{children:e.href?(0,r.jsx)(x(),{href:e.href,className:"group flex h-[40px] w-full cursor-pointer items-center gap-4 rounded-lg border-1 border-transparent p-2 transition-[background,max-width] duration-[var(--fast)] hover:bg-[var(--bg-topbar-link)] md:justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,r.jsxs)("span",{className:"relative flex min-h-6 min-w-6 items-center",children:[(0,r.jsx)(e.icon,{className:"absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0"}),(0,r.jsx)(e.iconHover,{className:"absolute text-[var(--accent-color)] opacity-0 transition-opacity duration-[var(--fast)] group-hover:opacity-100"})]}),(0,r.jsx)("span",{className:"truncate",children:e.label})]})}):(0,r.jsx)("button",{onClick:e.onClick,className:"group flex h-[40px] w-full cursor-pointer items-center gap-4 rounded-lg border-1 border-transparent p-2 transition-[background,max-width] duration-[var(--fast)] hover:bg-[var(--bg-topbar-link)] md:justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,r.jsxs)("span",{className:"relative flex min-h-6 min-w-6 items-center",children:[(0,r.jsx)(e.icon,{className:"absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0"}),(0,r.jsx)(e.iconHover,{className:"absolute text-[var(--accent-color)] opacity-0 transition-opacity duration-[var(--fast)] group-hover:opacity-100"})]}),(0,r.jsx)("span",{className:"truncate",children:e.label})]})})});var M=a(4163);let G=e=>{var t;let a=(0,v.usePathname)(),n=null!=(t=e.isActive)?t:a===e.href;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p.A,{content:e.tooltip?e.tooltip:"",side:"right",children:e.href?(0,r.jsx)(x(),{href:e.href,className:"".concat(n?"text-[var(--accent-color)]":""," ").concat(e.disabled?"cursor-not-allowed opacity-33":""," group flex h-[40px] w-full items-center gap-4 rounded-lg border-1 border-transparent p-2 transition-[background,max-width] duration-[var(--fast)] hover:bg-[var(--bg-modal-link)] md:justify-between"),children:e.icon&&e.iconHover?(0,r.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,r.jsxs)("span",{className:"relative flex min-h-6 min-w-6 items-center",children:[(0,r.jsx)(e.icon,{className:"".concat(n?"opacity-0":"opacity-100"," absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0")}),(0,r.jsx)(e.iconHover,{className:"".concat(n?"opacity-100":"opacity-0"," absolute text-[var(--accent-color)] transition-opacity duration-[var(--fast)] group-hover:opacity-100")})]}),(0,r.jsx)("span",{className:"".concat(n?"font-bold":""," truncate"),children:e.label})]}):(0,r.jsx)("span",{className:"".concat(n?"font-bold":""," truncate"),children:e.label})}):(0,r.jsx)("button",{onClick:e.onClick,className:"".concat(n?"text-[var(--accent-color)]":""," ").concat(e.disabled?"cursor-not-allowed opacity-33":"cursor-pointer"," group flex h-[40px] w-full items-center gap-4 rounded-lg border-1 border-transparent p-2 transition-[background,max-width] duration-[var(--fast)] hover:bg-[var(--bg-modal-link)] md:justify-between"),children:e.icon&&e.iconHover?(0,r.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,r.jsxs)("span",{className:"relative flex min-h-6 min-w-6 items-center",children:[(0,r.jsx)(e.icon,{className:"".concat(n?"opacity-0":"opacity-100"," absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0")}),(0,r.jsx)(e.iconHover,{className:"".concat(n?"opacity-100":"opacity-0"," absolute text-[var(--accent-color)] transition-opacity duration-[var(--fast)] group-hover:opacity-100")})]}),(0,r.jsx)("span",{className:"".concat(n?"font-bold":""," truncate"),children:e.label})]}):(0,r.jsx)("span",{className:"".concat(n?"font-bold":""," truncate"),children:e.label})})})})};var K=a(6678),W=a(1316),X=a(5649),$=a(2953),J=a(4402),V=a(1701);let Y=e=>{(0,n.useRef)(null);let[t,a]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(null),{toggleTheme:h,currentTheme:x}=N(),v="https://ecommerce-9jo7.onrender.com",f=localStorage.getItem("token"),{notify:g}=(0,A.d)(),{username:j,firstName:w,lastName:y,email:k,isLoggedIn:E,userId:H,fetchAuthData:z}=(0,b.A)(),I=async()=>{try{await fetch("".concat(v,"/user/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}})}catch(e){}finally{localStorage.removeItem("token"),localStorage.setItem("postLogoutToast","Du \xe4r nu utloggad!"),window.location.reload()}},O=async()=>{try{let t={};if("password"===m&&""!==c.trim()?t.password=c:"firstName"===m&&""!==c.trim()&&c!==w?t.firstName=c:"lastName"===m&&""!==c.trim()&&c!==y?t.lastName=c:"email"===m&&""!==c.trim()&&c!==k&&(t.email=c),0===Object.keys(t).length){g("info","Inga \xe4ndringar att spara!"),u(null);return}let a=await fetch("".concat(v,"/user/update-profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(t)});if(401===a.status)return void localStorage.removeItem("token");let r=await a.json();if(!a.ok){if(r.errors){let e=null,t=Number.MAX_SAFE_INTEGER;for(let a in r.errors)for(let n of r.errors[a]){let a=n.match(/\[(\d+)\]/),r=a?parseInt(a[1],10):99;r<t&&(t=r,e=n.replace(/\[\d+\]\s*/,""))}e&&g("error",e);return}if(r.message)return void g("error",r.message);g("error","Ett ok\xe4nt fel intr\xe4ffade");return}g("success","Profil uppdaterad!",4e3),u(null),e.onProfileUpdated&&e.onProfileUpdated()}catch(e){g("error",String(e)),u(null)}};(0,n.useEffect)(()=>{let e=localStorage.getItem("postLogoutToast");e&&(g("info",e,6e3),localStorage.removeItem("postLogoutToast"))},[]);let P=()=>{a(!1),l(!1),i(!1),u(null)};(0,n.useEffect)(()=>{P(),a(!0)},[e.isOpen]);let _="mt-4 mb-4 rounded-full text-[var(--border-main)]",U="flex-wrap flex items-center justify-between gap-2";return(0,r.jsx)(M.A,{isOpen:e.isOpen,onClose:e.onClose,label:"Inst\xe4llningar",icon:L.A,smallGap:!0,children:(0,r.jsxs)("div",{className:"flex h-128 flex-col gap-4 sm:flex-row",children:[(0,r.jsxs)("ul",{className:"flex flex-wrap gap-2 rounded-lg bg-[var(--bg-navbar)] p-2 sm:flex-1 sm:flex-col sm:gap-0 sm:bg-transparent sm:p-0",children:[(0,r.jsx)("li",{children:(0,r.jsx)(G,{onClick:()=>{P(),a(!0)},label:"Allm\xe4nt",icon:R.A,iconHover:L.A,isActive:t})}),(0,r.jsx)("li",{children:(0,r.jsx)(G,{onClick:()=>{P(),l(!0)},label:"Profil",icon:K.A,iconHover:X.A,isActive:s})}),(0,r.jsx)(p.A,{content:"Ej implementerat!",children:(0,r.jsx)("li",{children:(0,r.jsx)(G,{disabled:!0,label:"Aviseringar",icon:T.A,iconHover:C.A,isActive:o})})})]}),(0,r.jsx)("div",{className:"flex flex-2",children:(0,r.jsx)("div",{className:"flex flex-grow",children:t?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{id:"portal-root"}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"Tema"}),(0,r.jsx)("span",{className:"w-24",children:(0,r.jsx)(J.A,{options:[{label:"M\xf6rkt",value:"dark"},{label:"Ljust",value:"light"}],value:null!=x?x:"",onChange:e=>{("dark"===e&&"dark"!==x||"light"===e&&"light"!==x)&&h()},onModal:!0})})]}),(0,r.jsx)("hr",{className:"".concat(_)}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"Logga ut befintlig anv\xe4ndare"}),(0,r.jsx)("span",{children:(0,r.jsx)("button",{onClick:()=>{I(),e.onClose()},className:"".concat(S.p9," w-full rounded-full px-4"),children:"Logga ut"})})]})]}):s?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{id:"portal-root"}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"Anv\xe4ndarnamn"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(p.A,{side:"left",content:j,children:(0,r.jsx)("span",{className:"w-48 truncate overflow-x-hidden",children:j})}),(0,r.jsx)(p.A,{content:"Ej redigerbar!",children:(0,r.jsx)("button",{className:"".concat(S.U0," !h-6 !w-6"),disabled:!0,children:(0,r.jsx)(W.A,{})})})]})]}),(0,r.jsx)("hr",{className:"".concat(_)}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"L\xf6senord"}),"password"===m?(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(V.A,{placeholder:"•••••••••",value:c,onChange:e=>d(e),type:"password",autoComplete:"new-password"}),(0,r.jsx)("button",{onClick:()=>O(),className:"".concat(S.U0),children:(0,r.jsx)($.A,{})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"w-48",children:"•••••••••"}),(0,r.jsx)("button",{onClick:()=>{u("password"),d("")},className:"".concat(S.U0," !h-6 !w-6"),children:(0,r.jsx)(W.A,{})})]})]}),(0,r.jsx)("hr",{className:"".concat(_)}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"F\xf6rnamn"}),"firstName"===m?(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(V.A,{placeholder:w,value:c,onChange:e=>d(e)}),(0,r.jsx)("button",{onClick:()=>{O(),z()},className:"".concat(S.U0),children:(0,r.jsx)($.A,{})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(p.A,{side:"left",content:w,children:(0,r.jsx)("span",{className:"w-48 truncate overflow-x-hidden",children:w})}),(0,r.jsx)("button",{onClick:()=>{u("firstName"),d("")},className:"".concat(S.U0," !h-6 !w-6"),children:(0,r.jsx)(W.A,{})})]})]}),(0,r.jsx)("hr",{className:"".concat(_)}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"Efternamn"}),"lastName"===m?(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(V.A,{placeholder:y,value:c,onChange:e=>d(e)}),(0,r.jsx)("button",{onClick:()=>{O(),z()},className:"".concat(S.U0),children:(0,r.jsx)($.A,{})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(p.A,{side:"left",content:y,children:(0,r.jsx)("span",{className:"w-48 truncate overflow-x-hidden",children:y})}),(0,r.jsx)("button",{onClick:()=>{u("lastName"),d("")},className:"".concat(S.U0," !h-6 !w-6"),children:(0,r.jsx)(W.A,{})})]})]}),(0,r.jsx)("hr",{className:"".concat(_)}),(0,r.jsxs)("div",{className:"".concat(U),children:[(0,r.jsx)("span",{children:"Mejladress"}),"email"===m?(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(V.A,{placeholder:k,value:c,onChange:e=>d(e),type:"email",id:"email"}),(0,r.jsx)("button",{onClick:()=>{O(),z()},className:"".concat(S.U0),children:(0,r.jsx)($.A,{})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(p.A,{side:"left",content:k,children:(0,r.jsx)("span",{className:"w-48 truncate overflow-x-hidden",children:k})}),(0,r.jsx)("button",{onClick:()=>{u("email"),d("")},className:"".concat(S.U0," !h-6 !w-6"),children:(0,r.jsx)(W.A,{})})]})]})]}):""})})]})})},Q=e=>{let t=(0,n.useRef)(null),a=(0,n.useRef)(null),[s,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!0),[c,d]=(0,n.useState)(0),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),v=localStorage.getItem("token"),{notify:p}=(0,A.d)(),{username:f,firstName:g,lastName:j,isLoggedIn:w,isAuthReady:k,fetchAuthData:M}=(0,b.A)(),{toggleTheme:G,currentTheme:K}=N();(0,n.useEffect)(()=>{let e=()=>{let e=window.scrollY;e>c&&e>50?(i(!1),X()):i(!0),d(e)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[c]);let W=async()=>{try{await fetch("".concat("https://ecommerce-9jo7.onrender.com","/user/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}})}catch(e){}finally{localStorage.removeItem("token"),localStorage.setItem("postLogoutToast","Du \xe4r nu utloggad!"),window.location.reload()}};(0,n.useEffect)(()=>{let e=localStorage.getItem("postLogoutToast");e&&(p("info",e,6e3),localStorage.removeItem("postLogoutToast"))},[]);let X=()=>{u(!1),x(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{isOpen:s,onClose:()=>l(!1),onProfileUpdated:M}),(0,r.jsx)("div",{inert:!o,className:"".concat(o?"translate-y-0":"-translate-y-full"," ").concat(e.hasScrollbar?"max-w-[calc(100%-5.5rem)] md:max-w-[calc(100%-16.75rem)]":"max-w-[calc(100%-4.75rem)] md:max-w-[calc(100%-16rem)]"," transition-transforn fixed top-0 right-0 z-[calc(var(--z-overlay)-2)] flex h-18 w-full border-b-1 border-[var(--border-main)] bg-[var(--bg-navbar)] p-4 duration-[var(--slow)]"),children:k?(0,r.jsxs)(r.Fragment,{children:[w&&(0,r.jsxs)("div",{className:"xs:flex hidden w-full items-center text-lg whitespace-nowrap",children:[(0,r.jsx)("span",{className:"",children:"V\xe4lkommen tillbaka,\xa0"}),(0,r.jsx)("span",{className:"font-semibold text-[var(--accent-color)]",children:g||f}),"!"]}),(0,r.jsxs)("div",{className:"flex w-full items-center justify-end gap-4",children:[w&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{ref:a,className:"".concat(S.Kt," group"),onClick:()=>{X(),x(!h)},children:(0,r.jsxs)("span",{className:"group relative flex h-6 w-6 items-center justify-center",children:[(0,r.jsx)(T.A,{className:"".concat(h?"opacity-0":"opacity-100"," absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0")}),(0,r.jsx)(C.A,{className:"".concat(h?"opacity-100":"opacity-0"," absolute text-[var(--accent-color)] transition-opacity duration-[var(--fast)] group-hover:opacity-100")})]})}),(0,r.jsx)(B.A,{triggerRef:a,isOpen:h,onClose:()=>x(!1),children:(0,r.jsx)("span",{children:"Du har inga nya meddelanden."})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{ref:t,className:"".concat(S.Kt," group"),onClick:()=>{X(),u(!m)},children:(0,r.jsxs)("span",{className:"group relative flex h-6 w-6 items-center justify-center",children:[(0,r.jsx)(P.A,{className:"".concat(m?"opacity-0":"opacity-100"," absolute transition-opacity duration-[var(--fast)] group-hover:opacity-0")}),(0,r.jsx)(E.A,{className:"".concat(m?"opacity-100":"opacity-0"," absolute text-[var(--accent-color)] transition-opacity duration-[var(--fast)] group-hover:opacity-100")})]})}),(0,r.jsxs)(B.A,{triggerRef:t,isOpen:m,onClose:()=>u(!1),children:[w&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"font-semibold break-words text-[var(--accent-color)]",children:g&&j?g+" "+j:g||f}),(0,r.jsx)("hr",{className:"absolute mt-4 -ml-4 flex w-[calc(100%+2rem)] text-[var(--border-main)]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"flex pb-1 text-sm font-semibold",children:"Hantera"}),(0,r.jsx)(D,{onClick:G,label:"dark"===K?"Byt till ljust tema":"Byt till m\xf6rkt tema",icon:"dark"===K?_.A:U.A,iconHover:"dark"===K?H.A:z.A}),w&&(0,r.jsx)(D,{onClick:()=>{X(),l(!0)},label:"Inst\xe4llningar",icon:R.A,iconHover:L.A})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("hr",{className:"absolute -mt-4 -ml-4 w-[calc(100%+2rem)] text-[var(--border-main)]"}),(0,r.jsx)("span",{className:"pb-1 text-sm font-semibold",children:"Session"}),w?(0,r.jsx)(D,{onClick:W,label:"Logga ut",icon:q.A,iconHover:I.A}):(0,r.jsx)(D,{href:"/",label:"Logga in",icon:F.A,iconHover:O.A})]})]})]})]})]}):(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("span",{className:"hidden md:inline",children:(0,r.jsx)(y.A,{icon:"loading",content:"H\xe4mtar inneh\xe5ll...",sideMessage:!0,fullscreen:!0,withinContainer:!0})}),(0,r.jsx)("span",{className:"inline md:hidden",children:(0,r.jsx)(y.A,{icon:"loading",fullscreen:!0,withinContainer:!0})})]})})]})},Z=e=>{let[t,a]=(0,n.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k,{hasScrollbar:t,setHasScrollbar:a}),(0,r.jsx)(Q,{hasScrollbar:t}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"".concat(t?"ml-22 md:ml-67":"ml-19 md:ml-64"," w-full max-w-[1920px] overflow-x-hidden p-4 pt-22 duration-[var(--medium)]"),children:e.children})})]})}},3891:(e,t,a)=>{Promise.resolve().then(a.bind(a,3310)),Promise.resolve().then(a.bind(a,5502)),Promise.resolve().then(a.bind(a,8500)),Promise.resolve().then(a.t.bind(a,6674,23)),Promise.resolve().then(a.t.bind(a,2226,23)),Promise.resolve().then(a.t.bind(a,4553,23))},4553:()=>{},5502:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var r=a(5155),n=a(2115);function s(e){let{children:t}=e,[a,s]=(0,n.useState)(null);return((0,n.useEffect)(()=>{let e=localStorage.getItem("theme")||"light";s(e),document.documentElement.setAttribute("dataTheme",e)},[]),null===a)?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{children:t})}},6674:()=>{},7877:(e,t,a)=>{"use strict";a.d(t,{A:()=>j});var r=a(5155),n=a(1972),s=a(5279),l=a(3347),o=a(8338),i=a(4170),c=a(4393),d=a(6073),m=a(1817),u=a(4760),h=a(3466),x=a(8054),v=a(6874),p=a.n(v),f=a(2115);let b={loading:s.A,deny:l.A,server:o.A,user:i.A,category:c.A,unit:d.A,unitGroup:m.A,beware:u.A,search:h.A},g={loading:"Laddar...",auth:"Autentiserar...",deny:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:"Obeh\xf6rig access!"})," ",(0,r.jsxs)("span",{children:[(0,r.jsx)(p(),{href:"/",className:"".concat(n.$U),children:"Klicka h\xe4r"})," ","f\xf6r att logga in."]})]}),server:"Ingen kontakt med servern, f\xf6rs\xf6k igen senare!"},j=e=>{var t;let[a,n]=(0,f.useState)(null);(0,f.useEffect)(()=>{n(()=>{var t;return e.icon&&null!=(t=b[e.icon])?t:null})},[e.icon]);let s=null!=(t=e.content&&g[e.content])?t:e.content;return(0,r.jsx)("div",{className:"".concat(e.fullscreen?"fixed inset-0 overflow-auto":"h-full grow"," ").concat(!e.withinContainer&&e.fullscreen?"ml-18 md:ml-64":e.withinContainer&&e.fullscreen&&""," flex items-center justify-center"),children:(0,r.jsxs)("div",{className:"".concat(e.sideMessage?"":"flex-col"," flex items-center gap-3 opacity-75"),children:[e.icon&&a?(0,r.jsx)(a,{className:"".concat("loading"===e.icon?"motion-safe:animate-[spin_2s_linear_infinite]":""," h-8 w-8")}):e.icon?(0,r.jsx)("div",{className:"h-8 w-8"}):(0,r.jsx)(x.A,{className:"h-8 w-8"}),s&&(0,r.jsx)("span",{className:"text-center",children:s})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[890,197,637,457,945,441,684,358],()=>t(3891)),_N_E=e.O()}]);