"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{703:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(5155),l=n(1133),r=n(2115),s=n(4500);let i=e=>{let t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!e.isOpen)return;let n=n=>{let a=t.current,l=e.triggerRef&&e.triggerRef.current,r=n.target;a&&!a.contains(r)&&l&&!l.contains(r)&&e.onClose()};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e.isOpen,e.onClose]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":"Sidomeny",onClick:()=>e.onClose(),className:"".concat(e.isOpen?"opacity-100":"pointer-events-none opacity-0"," fixed inset-0 z-[var(--z-overlay)] h-svh w-screen bg-black/50 transition-opacity duration-[var(--slow)]"),children:(0,a.jsx)("div",{ref:t,onClick:e=>e.stopPropagation(),className:"".concat(e.isOpen?"sm:translate-x-0 sm:translate-y-0 visible translate-y-0":"sm:translate-y-0 sm:translate-x-full invisible translate-y-full"," sm:w-128 sm:right-0 sm:top-0 sm:h-full sm:rounded-b-2xl sm:!rounded-r-none fixed bottom-0 z-[calc(var(--z-modal))] flex h-3/4 w-full flex-col rounded-l-2xl rounded-r-2xl rounded-b-none bg-[var(--bg-topbar)] shadow-[0_0_16px_0_rgba(0,0,0,0.125)] transition-[translate,visibility] duration-[var(--slow)]"),children:(0,a.jsx)(l.FocusTrap,{active:e.isOpen,focusTrapOptions:{initialFocus:!1,allowOutsideClick:!0,fallbackFocus:()=>t.current},children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-between p-4",children:[(0,a.jsx)("span",{className:"text-2xl font-semibold",children:e.label}),(0,a.jsx)("button",{onClick:()=>e.onClose(),className:"h-[32px] w-[32px] cursor-pointer duration-[var(--fast)] hover:text-[var(--accent-color)]",children:(0,a.jsx)(s.A,{})}),(0,a.jsx)("hr",{className:"absolute mt-16 -ml-4 flex w-[calc(100%+2rem)] text-[var(--border-main)]"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-4",children:e.children})]})})})})})}},1151:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},2175:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))})},2237:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))})},3107:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(5155),l=n(2115);let r=e=>{let t=(0,l.useRef)(null),[n,r]=(0,l.useState)("16rem"),s=()=>{let e=t.current;if(!e)return;let n=e.getBoundingClientRect(),a=Math.min(window.innerWidth-n.left,n.right-80,256);r("".concat(a,"px"))};return(0,l.useEffect)(()=>{if(!e.isOpen||!t.current)return;let n=requestAnimationFrame(s);return()=>cancelAnimationFrame(n)},[e.isOpen]),(0,l.useEffect)(()=>{let e=new ResizeObserver(s);return t.current&&e.observe(t.current),window.addEventListener("resize",s),()=>{e.disconnect(),window.removeEventListener("resize",s)}},[]),(0,l.useEffect)(()=>{if(!e.isOpen)return;s();let n=n=>{let a=t.current,l=e.triggerRef&&e.triggerRef.current,r=n.target;a&&!a.contains(r)&&l&&!l.contains(r)&&e.onClose()};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e.isOpen,e.onClose]),(0,a.jsx)("div",{ref:t,role:"dialog","aria-hidden":!e.isOpen,className:"".concat(e.isOpen?"visible opacity-100":"invisible opacity-0"," absolute top-full right-0 z-[calc(var(--z-tooltip)+1)] mt-1 flex flex-col gap-8 overflow-x-hidden overflow-y-auto rounded-2xl bg-[var(--bg-topbar)] p-4 break-words shadow-[0_0_16px_0_rgba(0,0,0,0.125)] transition-[opacity,visibility] duration-[var(--fast)]"),style:{width:n},children:e.children})}},3472:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{d:"M10 3.75a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM17.25 4.5a.75.75 0 0 0 0-1.5h-5.5a.75.75 0 0 0 0 1.5h5.5ZM5 3.75a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 .75.75ZM4.25 17a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5ZM17.25 17a.75.75 0 0 0 0-1.5h-5.5a.75.75 0 0 0 0 1.5h5.5ZM9 10a.75.75 0 0 1-.75.75h-5.5a.75.75 0 0 1 0-1.5h5.5A.75.75 0 0 1 9 10ZM17.25 10.75a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5ZM14 10a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM10 16.25a2 2 0 1 0-4 0 2 2 0 0 0 4 0Z"}))})},3555:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(5155),l=n(1151),r=n(1972),s=n(4163);let i=e=>(0,a.jsx)(a.Fragment,{children:e.isOpen&&(0,a.jsx)(s.A,{isOpen:e.isOpen,onClose:()=>e.onClose(),icon:l.A,label:"\xc4r du s\xe4ker?",children:(0,a.jsxs)("div",{className:"relative flex gap-8 flex-col",children:[(0,a.jsx)("p",{children:"Ett borttaget objekt g\xe5r ej att f\xe5 tillbaka."}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between",children:[(0,a.jsx)("button",{type:"button",onClick:e.onConfirm,className:"".concat(r.eA," w-full grow-2 sm:w-auto"),children:"Ta bort"}),(0,a.jsx)("button",{type:"button",onClick:e.onClose,className:"".concat(r.p9," w-full grow sm:w-auto"),children:"\xc5ngra"})]})]})})})},3762:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))})},4822:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))})},5271:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))})},6493:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))})},6742:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(5155),l=n(2115),r=n(1701),s=n(3555),i=n(8500),o=n(4541),c=n(815),d=n(6934),u=n(4822),h=n(6493),m=n(5271),x=n(3472),f=n(3762),p=n(2237),v=n(7765),g=n(2175),j=n(1151),b=n(1972),w=n(7877),N=n(4402),y=n(4163);let k=e=>{let t=(0,l.useRef)(null),[n,s]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)([]),x=localStorage.getItem("token"),{notify:f}=(0,i.d)(),p="https://ecommerce-9jo7.onrender.com";(0,l.useEffect)(()=>{e.isOpen&&(w(),null!==e.unitId&&void 0!==e.unitId?k():(s(""),c(""),u(!1)))},[e.isOpen,e.unitId]);let j=async t=>{t.preventDefault();try{let t=await fetch("".concat(p,"/unit/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({name:n,unitGroupId:parseInt(o),isHidden:d})});if(401===t.status)return void localStorage.removeItem("token");let l=await t.json();if(!t.ok){if(l.errors){let e=null,t=Number.MAX_SAFE_INTEGER;for(let n in l.errors)for(let a of l.errors[n]){let n=a.match(/\[(\d+)\]/),l=n?parseInt(n[1],10):99;l<t&&(t=l,e=a.replace(/\[\d+\]\s*/,""))}e&&f("error",e);return}if(l.message)return void f("error",l.message);f("error","Ett ok\xe4nt fel intr\xe4ffade");return}e.onClose(),e.onUnitUpdated(),f("success",(0,a.jsxs)(a.Fragment,{children:["Enhet skapad! ",(0,a.jsx)("p",{children:"Uppdatera sidan (F5) f\xf6r att hitta den i menyn"})]}),4e3)}catch(e){f("error",String(e))}},w=async()=>{try{let e=await fetch("".concat(p,"/unit-group"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)}}),t=await e.json();e.ok?m(t.items):f("error",t.message)}catch(e){f("error",String(e))}},k=async()=>{try{let t=await fetch("".concat(p,"/unit/fetch/").concat(e.unitId),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)}}),n=await t.json();t.ok?A(n):f("error",n.message)}catch(e){f("error",String(e))}},A=e=>{var t,n,a;s(null!=(t=e.name)?t:""),c(String(null!=(n=e.unitGroupId)?n:"")),u(null!=(a=e.isHidden)&&a)},S=async(t,a)=>{t.preventDefault();try{let t=await fetch("".concat(p,"/unit/update/").concat(e.unitId),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({name:n,unitGroupId:parseInt(o),isHidden:d})});if(401===t.status)return void localStorage.removeItem("token");let a=await t.json();if(!t.ok){if(a.errors){let e=null,t=Number.MAX_SAFE_INTEGER;for(let n in a.errors)for(let l of a.errors[n]){let n=l.match(/\[(\d+)\]/),a=n?parseInt(n[1],10):99;a<t&&(t=a,e=l.replace(/\[\d+\]\s*/,""))}e&&f("error",e);return}if(a.message)return void f("error",a.message);f("error","Ett ok\xe4nt fel intr\xe4ffade");return}e.onClose(),e.onUnitUpdated(),f("success","Enhet uppdaterad!",4e3)}catch(e){f("error",String(e))}};return(0,a.jsx)(a.Fragment,{children:e.isOpen&&(0,a.jsx)(y.A,{isOpen:e.isOpen,onClose:()=>e.onClose(),icon:e.unitId?g.A:v.A,label:e.unitId?"Redigera enhet":"L\xe4gg till ny enhet",children:(0,a.jsxs)("form",{ref:t,className:"relative flex flex-col gap-4",onSubmit:t=>e.unitId?S(t,e.unitId):j(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("hr",{className:"w-12 text-[var(--border-main)]"}),(0,a.jsx)("h3",{className:"text-sm whitespace-nowrap text-[var(--text-secondary)]",children:"Uppgifter om enheten"}),(0,a.jsx)("hr",{className:"w-full text-[var(--border-main)]"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:gap-4",children:[(0,a.jsx)(r.A,{label:"Namn",value:n,onChange:e=>s(String(e)),onModal:!0,required:!0}),(0,a.jsx)("div",{className:"flex w-full gap-6 sm:gap-4",children:(0,a.jsx)(N.A,{id:"unitGroup",label:"Enhetsgrupp",value:o,onChange:e=>c(String(e)),onModal:!0,required:!0,options:h.map(e=>({label:e.name,value:String(e.id)}))})})]}),(0,a.jsxs)("div",{className:"mt-8 flex items-center gap-2",children:[(0,a.jsx)("hr",{className:"w-12 text-[var(--border-main)]"}),(0,a.jsx)("h3",{className:"text-sm whitespace-nowrap text-[var(--text-secondary)]",children:"Status"}),(0,a.jsx)("hr",{className:"w-full text-[var(--border-main)]"})]}),(0,a.jsx)("div",{className:"mb-8 flex justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":d,className:(0,b.lj)(d),onClick:()=>u(e=>!e),children:(0,a.jsx)("div",{className:(0,b.XM)(d)})}),(0,a.jsx)("span",{className:"mb-0.5",children:"G\xf6m enhet"})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{var e;null==(e=t.current)||e.requestSubmit()},className:"".concat(b.$e," w-full grow-2 sm:w-auto"),children:e.unitId?"Uppdatera":"L\xe4gg till"}),(0,a.jsx)("button",{type:"button",onClick:e.onClose,className:"".concat(b.p9," w-full grow sm:w-auto"),children:"\xc5ngra"})]})]})})})};var A=n(3107),S=n(703);let E="pl-4 p-2 min-w-48 h-[40px] cursor-pointer border-1 border-t-0 border-[var(--border-secondary)] border-b-[var(--border-main)] text-left transition-[background] duration-[var(--fast)] hover:bg-[var(--bg-grid-header-hover)]",C="py-2 px-4 min-w-48 h-[40px] border-1 border-b-0 border-[var(--border-secondary)] text-left break-all",O="truncate font-semibold transition-colors duration-[var(--fast)] group-hover:text-[var(--accent-color)]",R="h-6 w-6 transition-[color,rotate] duration-[var(--fast)] group-hover:text-[var(--accent-color)]",L=e=>{let{filterRef:t,label:n,breakpoint:s,filterData:i}=e,[o,d]=(0,l.useState)(!1),u="relative hidden ";return"2xs"===s?u+="2xs:flex":"xs"===s?u+="xs:flex":"sm"===s?u+="sm:flex":"md"===s?u+="md:flex":"ml"===s?u+="ml:flex":"lg"===s?u+="lg:flex":"xl"===s?u+="xl:flex":"2xl"===s&&(u+="2xl:flex"),(0,a.jsxs)("div",{className:u,children:[(0,a.jsxs)("button",{ref:t,className:"".concat(b.Kt," group w-auto gap-2 px-4"),onClick:()=>{d(e=>!e)},children:[(0,a.jsx)("span",{className:"".concat(O," ").concat(o?"text-[var(--accent-color)]":""),children:n}),(0,a.jsx)(c.A,{className:"".concat(R," ").concat(o?"rotate-180 text-[var(--accent-color)]":"")})]}),(0,a.jsx)(A.A,{triggerRef:t,isOpen:o,onClose:()=>d(!1),children:(0,a.jsx)("div",{className:"flex w-full flex-col gap-4",children:i.map((e,t)=>{var n;return(0,a.jsxs)("div",{onClick:()=>e.setShow(!e.show),className:"group flex cursor-pointer justify-between",children:[(0,a.jsx)(r.A,{type:"checkbox",checked:e.show,label:e.label,readOnly:!0}),(0,a.jsxs)("span",{children:["(",null!=(n=e.count)?n:0,")"]})]},t)})})})]})},M=e=>{let{filterRef:t,label:n,filterData:s}=e,[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)("0px");return(0,l.useEffect)(()=>{t.current&&u(i?"".concat(t.current.scrollHeight,"px"):"0px")},[i]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>o(e=>!e),className:"".concat(i?"text-[var(--accent-color)]":""," flex w-full cursor-pointer items-center justify-between py-4 duration-[var(--fast)] hover:text-[var(--accent-color)]"),children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:n}),(0,a.jsx)(c.A,{className:"".concat(i?"rotate-180":""," transition-rotate h-6 w-6 duration-[var(--fast)]")})]}),(0,a.jsx)("div",{style:{height:d},className:"overflow-hidden transition-[height] duration-[var(--slow)]",children:(0,a.jsx)("div",{ref:t,children:(0,a.jsx)("div",{className:"flex w-full flex-col",children:s.map((e,t)=>{var n;return(0,a.jsxs)("div",{onClick:()=>e.setShow(!e.show),className:"".concat(t===s.length-1?"mb-4":""," group flex cursor-pointer justify-between py-4"),children:[(0,a.jsx)(r.A,{type:"checkbox",checked:e.show,label:e.label,readOnly:!0}),(0,a.jsxs)("span",{children:["(",null!=(n=e.count)?n:0,")"]})]},t)})})})}),(0,a.jsx)("hr",{className:"-ml-4 flex w-[calc(100%+2rem)] text-[var(--border-main)]"})]})},I=e=>{let[t,n]=(0,l.useState)(2),[y,A]=(0,l.useState)(!1),[I,D]=(0,l.useState)(null),[B,T]=(0,l.useState)([]),[z,H]=(0,l.useState)(null),[Z,F]=(0,l.useState)([]),[G,_]=(0,l.useState)(!1),[U,K]=(0,l.useState)([]),[V,W]=(0,l.useState)(!1),[q,P]=(0,l.useState)(1),[X,$]=(0,l.useState)(5),[J,Q]=(0,l.useState)(null),[Y,ee]=(0,l.useState)("id"),[et,en]=(0,l.useState)("asc"),[ea,el]=(0,l.useState)(""),[er,es]=(0,l.useState)(!1),[ei,eo]=(0,l.useState)(!1),ec=localStorage.getItem("token"),ed="https://ecommerce-9jo7.onrender.com",{notify:eu}=(0,i.d)(),eh=q*X-X,em=Math.max(0,Math.min(X,(null!=J?J:0)-eh)),ex=Math.max(0,Math.min(X,em)),ef=Math.max(1,Math.ceil((null!=J?J:0)/X)),ep=(0,l.useRef)(null),ev=(0,l.useRef)(null),eg=(0,l.useRef)(null),[ej,eb]=(0,l.useState)(!1),ew=async function(e,t,n,a){let l=!(arguments.length>4)||void 0===arguments[4]||arguments[4];try{var r,s;l&&A(!0);let i=new URLSearchParams({page:String(e),pageSize:String(t),sortBy:n,sortOrder:a,search:ea});er&&!ei?i.append("isHidden","true"):!er&&ei&&i.append("isHidden","false");let o=await fetch("".concat(ed,"/unit?").concat(i.toString()),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ec)}});if(401===o.status)return void localStorage.removeItem("token");let c=await o.json();if(!o.ok)return void eu("error",c.message);T(Array.isArray(c.items)?c.items:[]),Q(null!=(r=c.totalCount)?r:0),D(null!=(s=c.counts)?s:null)}catch(e){}finally{l&&A(!1)}},eN=async e=>{try{let t=await fetch("".concat(ed,"/unit/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ec)}});if(401===t.status)return void localStorage.removeItem("token");let n=await t.json();if(!t.ok)return void eu("error",n.message);await ew(q,X,Y,et),eu("success","Enhet borttagen!",4e3)}catch(e){eu("error",String(e))}};(0,l.useEffect)(()=>{ew(q,X,Y,et)},[q,X,Y,et,ea,er,ei]),(0,l.useEffect)(()=>{P(1)},[ea,er,ei]);let ey=e=>{let t=e===Y&&"asc"===et?"desc":"asc";ee(e),en(t),ew(q,X,e,t,!1)},ek=e=>Y!==e?(0,a.jsx)(d.A,{className:"h-6 w-6"}):"asc"===et?(0,a.jsx)(u.A,{className:"h-6 w-6"}):(0,a.jsx)(c.A,{className:"h-6 w-6"}),eA=B.map(e=>e.id),eS=B.map(e=>e.id),eE=eS.length>0&&eS.every(e=>Z.includes(e)),eC=e=>{B.find(t=>t.id===e)&&(Z.includes(e)?F(Z.filter(t=>t!==e)):F([...Z,e]))},eO=()=>{eE?F(Z.filter(e=>!eS.includes(e))):F([...new Set([...Z,...eS])])};(0,l.useEffect)(()=>{let e=()=>{let e=window.innerWidth,t=2;e>=384&&(t+=1),e>=640&&(t+=1),n(t)};return e(),window.addEventListener("resize",e),()=>removeEventListener("resize",e)},[]);let eR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];K(e),W(e=>!e)},eL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;H(e),_(!0)},eM=e=>{let{visible:t,onClickEvent:n,label:l}=e;return(0,a.jsx)(a.Fragment,{children:t&&(0,a.jsxs)("button",{className:"".concat(b.Kt," group w-auto gap-2 px-4"),onClick:()=>{n(!1)},children:[(0,a.jsx)("span",{className:"".concat(O),children:l}),(0,a.jsx)(h.A,{className:"".concat(R)})]})})},eI=e=>{let{sortingItem:t,label:n,labelAsc:l,labelDesc:r,classNameAddition:s}=e;return(0,a.jsx)(o.A,{content:Y===t&&"asc"===et?"Sortera "+l:"Sortera "+r,children:(0,a.jsx)("th",{className:"".concat(E," ").concat(s||""),onClick:()=>ey(t),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ey(t))},tabIndex:0,"aria-sort":Y===t?"asc"===et?"ascending":"descending":"none",children:(0,a.jsxs)("div",{className:"relative flex gap-2",children:[(0,a.jsx)("span",{className:"w-full truncate overflow-hidden text-ellipsis",children:n}),(0,a.jsx)("span",{className:"flex",children:ek(t)})]})})})},eD=e=>{let{children:t,classNameAddition:n}=e;return(0,a.jsx)("td",{className:"".concat(C," ").concat(n||""),children:(0,a.jsx)("div",{className:"truncate overflow-hidden text-ellipsis",children:t})})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{isOpen:G,onClose:()=>{_(!1),H(null)},unitId:z,onUnitUpdated:()=>{ew(q,X,Y,et)}}),(0,a.jsx)(s.A,{isOpen:V,onClose:()=>{eR(),K([])},onConfirm:async()=>{for(let e of U)await eN(e);W(!1),K([]),F([])}}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)(o.A,{content:"L\xe4gg till ny enhet",lgHidden:!0,children:(0,a.jsx)("button",{className:"".concat(b.$e," sm:w-56 sm:min-w-56"),onClick:()=>{eL()},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eL())},tabIndex:0,children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 truncate",children:[(0,a.jsx)(v.A,{className:"h-6"}),(0,a.jsx)("span",{className:"hidden sm:block",children:"L\xe4gg till ny enhet"})]})})}),(0,a.jsx)(o.A,{content:0===Z.length?"V\xe4lj en enhet":1===Z.length?"Redigera enhet":"Du kan bara redigera en enhet i taget!",lgHidden:1===Z.length,showOnTouch:0===Z.length||Z.length>1,children:(0,a.jsx)("button",{className:"".concat(b.p9," sm:w-56 sm:min-w-56"),onClick:()=>{eL(Z[0])},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eL(Z[0]))},tabIndex:0,disabled:0===Z.length||Z.length>1,children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 truncate",children:[(0,a.jsx)(g.A,{className:"h-6 min-h-6 w-6 min-w-6"}),(0,a.jsx)("span",{className:"hidden sm:block",children:"Redigera enhet"})]})})}),(0,a.jsx)(o.A,{content:0===Z.length?"V\xe4lj en eller fler enheter":"Ta bort enhet (".concat(Z.length,")"),lgHidden:Z.length>0,showOnTouch:0===Z.length,children:(0,a.jsx)("button",{className:"".concat(b.s9," 3xs:ml-auto lg:w-56 lg:min-w-56"),onClick:()=>eR(Z),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eR(Z))},tabIndex:0,disabled:0===Z.length,children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 truncate",children:[(0,a.jsx)(j.A,{className:"h-6"}),(0,a.jsxs)("span",{className:"hidden lg:block",children:["Ta bort enhet",(0,a.jsx)("span",{children:Z.length>0?" (".concat(Z.length,")"):""})]})]})})})]}),(0,a.jsxs)("div",{className:"3xs:flex-nowrap flex flex-wrap justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex w-full items-center gap-4",children:(0,a.jsx)("div",{className:"flex w-full items-center justify-start",children:(0,a.jsx)(r.A,{icon:(0,a.jsx)(m.A,{}),placeholder:"S\xf6k enhet",value:ea,onChange:e=>el(String(e).toLowerCase())})})}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(L,{filterRef:ep,label:"Status",breakpoint:"sm",filterData:[{label:"G\xf6md",show:er,setShow:es,count:null==I?void 0:I.filteredHidden},{label:"Synlig",show:ei,setShow:eo,count:null==I?void 0:I.filteredVisible}]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"".concat(b.Kt," group xs:w-auto xs:px-4 gap-2"),onClick:()=>{eb(!0)},children:[(0,a.jsx)("span",{className:"".concat(O," xs:flex hidden"),children:"Alla filter"}),(0,a.jsx)(x.A,{className:"".concat(R)})]}),(0,a.jsx)(S.A,{triggerRef:ev,isOpen:ej,onClose:()=>eb(!1),label:"Alla filter",children:(0,a.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(M,{filterRef:eg,label:"Status",filterData:[{label:"G\xf6md",show:er,setShow:es,count:null==I?void 0:I.filteredHidden},{label:"Synlig",show:ei,setShow:eo,count:null==I?void 0:I.filteredVisible}]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 py-4 sm:flex-row",children:[(0,a.jsxs)("button",{onClick:()=>eb(!1),className:"".concat(b.$e," w-full"),children:["Visa"," ",(0,a.jsx)("span",{className:"font-normal",children:null!=J?J:0})]}),(0,a.jsx)("button",{onClick:()=>{es(!1),eo(!1)},className:"".concat(b.p9," w-full"),disabled:!er&&!ei,children:"Rensa alla"})]})]})})]})]})]}),(er||ei)&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)("span",{className:"flex items-center font-semibold text-[var(--text-secondary)]",children:"Aktiva filter:"}),(0,a.jsx)(eM,{visible:er,onClickEvent:es,label:"G\xf6md"}),(0,a.jsx)(eM,{visible:ei,onClickEvent:eo,label:"Synlig"}),(0,a.jsx)("button",{className:"group w-auto cursor-pointer rounded-full px-4 transition-colors duration-[var(--fast)] hover:bg-[var(--bg-navbar-link)]",onClick:()=>{es(!1),eo(!1)},children:(0,a.jsx)("span",{className:"font-semibold text-[var(--accent-color)]",children:"Rensa alla"})})]})]}),(0,a.jsx)("div",{className:"flex w-full flex-col",children:(0,a.jsx)("div",{className:"flex w-full overflow-x-auto rounded border-1 border-[var(--border-main)]",children:(0,a.jsxs)("table",{className:"w-full table-fixed border-collapse",children:[(0,a.jsx)("thead",{className:"".concat(!e.isConnected||y?"pointer-events-none":""," bg-[var(--bg-grid-header)]"),children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"".concat(E," !w-[40px] !min-w-[40px] !border-l-0 !pl-2"),onClick:eO,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eO())},children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(r.A,{type:"checkbox",checked:eE,indeterminate:!eE&&eA.some(e=>Z.includes(e)),readOnly:!0})})}),(0,a.jsx)(eI,{sortingItem:"name",label:"Namn",labelAsc:"namn \xd6-A",labelDesc:"namn A-\xd6"}),(0,a.jsx)(eI,{sortingItem:"unitGroupName",label:"Tillh\xf6r enhetsgrupp",labelAsc:"enhetsgrupp \xd6-A",labelDesc:"enhetsgrupp A-\xd6",classNameAddition:"hidden sm:table-cell"}),(0,a.jsx)(eI,{sortingItem:"isHidden",label:"Status",labelAsc:"g\xf6mda enheter",labelDesc:"synliga enheter",classNameAddition:"w-28 min-w-28 border-r-0 hidden 2xs:table-cell"})]})}),(0,a.jsx)("tbody",{children:e.isConnected&&0!==B.length?y?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("tr",{className:"bg-[var(--bg-grid)]",children:(0,a.jsx)("td",{colSpan:t,style:{height:"".concat(40*ex,"px")},children:(0,a.jsx)("div",{className:"flex h-[40px]",children:(0,a.jsx)(w.default,{icon:"loading",content:"H\xe4mtar inneh\xe5ll...",sideMessage:(null!=em?em:0)<=2})})})})}):(0,a.jsx)(a.Fragment,{children:B.map((e,t)=>{let n=Z.includes(e.id),l="".concat(t%2==0?"bg-[var(--bg-grid)]":"bg-[var(--bg-grid-zebra)]"," ").concat(n?"bg-[var--bg-grid-header-hover)]":"","\n                        hover:bg-[var(--bg-grid-header-hover)] cursor-pointer transition-[background] duration-[var(--fast)]");return(0,a.jsxs)("tr",{className:l,onClick:()=>eC(e.id),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),eC(e.id))},children:[(0,a.jsx)("td",{className:"".concat(C," !w-[40px] !min-w-[40px] cursor-pointer !border-l-0"),children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(r.A,{type:"checkbox",checked:Z.includes(e.id),readOnly:!0})})})}),(0,a.jsx)(eD,{children:e.name}),(0,a.jsx)(eD,{classNameAddition:"hidden sm:table-cell",children:e.unitGroupName}),(0,a.jsx)(eD,{classNameAddition:" w-28 min-w-28 border-r-0 2xs:table-cell hidden",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("span",{className:"".concat(e.isHidden?"bg-[var(--locked)]":"bg-[var(--unlocked)]"," flex h-6 w-64 items-center justify-center rounded-xl text-sm font-semibold text-[var(--text-main-reverse)]"),children:e.isHidden?"G\xf6md":"Synlig"})})})]},e.id)})}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t,className:"h-57",children:e.isConnected?(0,a.jsx)(w.default,{icon:"search",content:ea||er||ei?"Inga enheter kunde hittas med det s\xf6kkriteriet.":"Det finns inga enheter."}):(0,a.jsx)(w.default,{icon:"server",content:"server"})})})})]})})}),(0,a.jsxs)("div",{className:"flex w-full flex-wrap justify-between gap-x-12 gap-y-4",children:[(0,a.jsxs)("span",{className:"flex w-[175.23px] text-[var(--text-secondary)]",children:["Visar ",(q-1)*X+1,"-",Math.min(q*X,null!=J?J:0)," av"," ",null!=J?J:0]}),(0,a.jsxs)("div",{className:"xs:w-auto flex w-full items-center",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{F([]),P(e=>Math.max(e-1,1))},disabled:1===q,className:"".concat(b.U0),children:(0,a.jsx)(f.A,{className:"min-h-full min-w-full"})}),(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-center",children:(()=>{let e=[];if(ef<=7){for(let t=1;t<=ef;t++)e.push(t);return e}if(q<=3){for(let t=1;t<=4;t++)e.push(t);e.push("..."),e.push(ef)}else if(q>=ef-2){e.push(1),e.push("...");for(let t=ef-3;t<=ef;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=q-1;t<=q+1;t++)e.push(t);e.push("..."),e.push(ef)}return e})().map((e,t)=>"..."===e?(0,a.jsx)("span",{className:"flex px-2",children:"..."},t):(0,a.jsx)("button",{onClick:()=>{F([]),P(Number(e))},className:"".concat(q===e?"bg-[var(--accent-color)] text-[var(--text-main-reverse)]":"hover:text-[var(--accent-color)]"," ").concat(q===e&&e>=100?"px-5":""," flex max-w-7 min-w-7 cursor-pointer justify-center rounded-full px-1 text-lg transition-colors duration-[var(--fast)]"),children:e},t))}),(0,a.jsx)("button",{type:"button",onClick:()=>{F([]),P(e=>e<Math.max(1,Math.ceil((null!=J?J:0)/X))?e+1:e)},disabled:q>=Math.ceil((null!=J?J:0)/X),className:"".concat(b.U0),children:(0,a.jsx)(p.A,{className:"min-h-full min-w-full"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"",children:"Antal per sida:"}),(0,a.jsxs)("div",{className:"3xs:min-w-20",children:[(0,a.jsx)("div",{id:"portal-root"}),(0,a.jsx)(N.A,{options:[{label:"5",value:"5"},{label:"15",value:"15"},{label:"25",value:"25"}],value:String(X),onChange:e=>{let t=Number(e),n=Math.ceil((null!=J?J:0)/t);$(t),q>n&&P(n)}})]})]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("div",{className:"flex items-center rounded-t border-1 border-[var(--border-main)] bg-[var(--bg-grid-header)] px-3 py-2",children:(0,a.jsx)("span",{className:"truncate font-semibold",children:"Enhetsinformation"})}),(0,a.jsx)("div",{className:"".concat(0===Z.length||Z.length>1?"items-center":""," flex max-h-96 min-h-80 overflow-x-auto rounded-b border-1 border-t-0 border-[var(--border-main)] p-4"),children:0===Z.length?(0,a.jsx)(w.default,{icon:"unit",content:"H\xe4r kan du se information om vald enhet. V\xe4lj en i tabellen ovan!"}):Z.length>1?(0,a.jsx)(w.default,{icon:"beware",content:"Kan inte visa information om flera enheter samtidigt."}):(0,a.jsx)("div",{className:"flex",children:B.filter(e=>e.id===Z[0]).map(e=>(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Namn: "}),e.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tillh\xf6r enhetsgrupp: "}),e.unitGroupName?e.unitGroupName:"-"]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"".concat(e.isHidden?"bg-[var(--locked)]":"bg-[var(--unlocked)]"," flex h-6 w-28 items-center justify-center rounded-xl text-sm font-semibold text-[var(--text-main-reverse)]"),children:e.isHidden?"G\xf6md":"Synlig"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Skapad: "}),new Date(e.creationDate).toLocaleString()," av"," ",e.createdBy]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Uppdaterad: "}),new Date(e.updateDate).toLocaleString()," av"," ",e.updatedBy]})]})]},e.id))})})]})]})]})}},6934:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))})},7765:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=a.forwardRef(function(e,t){let{title:n,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})}}]);